/**
 * @license cantalupi v1.0.0
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("rxcomp"),require("rxcomp-form"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define(["rxcomp","rxcomp-form","rxjs/operators","rxjs"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).rxcomp,t.rxcomp.form,t.rxjs.operators,t.rxjs)}(this,(function(t,e,n,i){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var l,c=/(edge)/i.test(navigator.userAgent),u=/(msie|trident)/i.test(navigator.userAgent),h=!!window.chrome&&"undefined"!=typeof CSS&&!c&&!u,p=/AppleWebKit/i.test(navigator.userAgent)&&!h&&!c&&!u,f=(/iPad|iPhone|iPod/.test(navigator.userAgent)&&window,/(firefox|minefield)/i.test(navigator.userAgent),/android/i.test(navigator.userAgent),/safari/i.test(navigator.userAgent),new Set),d=function(){function t(){}return t.matchMedia=function(t){return p&&this.createEmptyStyleRule(t),this._matchMedia(t)},t.createEmptyStyleRule=function(t){if(!f.has(t))try{l||((l=document.createElement("style")).setAttribute("type","text/css"),document.head&&document.head.appendChild(l)),l.sheet&&(l.sheet.insertRule("@media "+t+" {.fx-query-test{ }}",0),f.add(t))}catch(t){console.error(t)}},t}();d._matchMedia=window.matchMedia?window.matchMedia.bind(window):function(t){return{matches:"all"===t||""===t,media:t,addListener:function(){},removeListener:function(){}}};var m=function(){function t(){}return t.observe$=function(t){var e=this,r=Object.assign({},t),o=[];return Object.keys(r).forEach((function(t){var n=r[t],i=n.split("and").map((function(t){return t.trim()}));i.forEach((function(t){return o.push(e.registerQuery$_(t).query$)})),r[t]={query:n,group:i}})),o=i.combineLatest.apply(void 0,o),i.concat(o.pipe(n.take(1)),o.pipe(n.skip(1),n.debounceTime(0))).pipe(n.map((function(t){var e={};return t.forEach((function(t){Object.keys(r).forEach((function(n){var i=r[n].group.reduce((function(e,n){return e&&(t.query!==n||t.matches)}),!0);e[n]=i}))})),e})))},t.has=function(t){return void 0!==this.queries_[t]},t.get=function(t){return this.queries_[t]},t.set=function(t,e){return this.queries_[t]=e},t.registerQuery$_=function(t){if(this.has(t))return this.get(t);var e=d.matchMedia(t),r={query$:new i.Observable((function(t){var n=function(e){return t.next(e)};return e.addListener(n),function(){e.removeListener(n)}})).pipe(n.startWith(e),n.map((function(e){return{query:t,matches:e.matches}}))),mediaQueryList:e};return this.set(t,r),r},t.splitQueries=function(t){return t.map((function(t){return t.split(",")})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.trim()}))},t}();s(m,"queries_",{});var g=function(){function e(){}return e.encode=function(e){return t.Serializer.encode(e,[t.encodeJson,encodeURIComponent,t.encodeBase64])||null},e.decode=function(e){return t.Serializer.decode(e,[t.decodeBase64,decodeURIComponent,t.decodeJson])},e.isSupported=function(e){var n,i=!1;try{n=t.WINDOW[e];var r="__storage_test__";n.setItem(r,r),n.removeItem(r),i=!0}catch(t){i=t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&Boolean(n&&0!==n.length)}return i},e}();s(g,"supported",!1);var v=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.clear=function(){this.isSupported()&&(sessionStorage.clear(),this.items$.next(this.toArray()))},e.delete=function(t){this.isSupported()&&(sessionStorage.removeItem(t),this.items$.next(this.toArray()))},e.exist=function(t){return!!this.isSupported()&&void 0!==sessionStorage.getItem(t)},e.get=function(t){return this.decode(this.getRaw(t))},e.set=function(t,e){this.setRaw(t,this.encode(e))},e.getRaw=function(t){var e=null;return this.isSupported()&&(e=sessionStorage.getItem(t)),e},e.setRaw=function(t,e){e&&this.isSupported()&&(sessionStorage.setItem(t,e),this.items$.next(this.toArray()))},e.toArray=function(){var t=this;return this.toRawArray().map((function(e){return e.value=t.decode(e.value),e}))},e.toRawArray=function(){var t=this;return this.isSupported()?Object.keys(sessionStorage).map((function(e){return{name:e,value:t.getRaw(e)}})):[]},e.isSupported=function(){return!!this.supported||g.isSupported("sessionStorage")},e}(g);s(v,"items$",new i.ReplaySubject(1));var y=function(e){function i(){return e.apply(this,arguments)||this}a(i,e);var r=i.prototype;return r.onInit=function(){var e=this;t.getContext(this).node.classList.remove("hidden");var i=v.get("showCover");this.showCover=!i,v.set("showCover",!0),m.observe$({isMobile:"(max-width: 767px)"}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){console.log("AppComponent.BreakpointService.results",t),e.isMobile=t.isMobile,e.pushChanges()}))},r.onSkipCover=function(t){console.log("AppComponent.onSkipCover"),this.showCover=!1,this.pushChanges()},r.onMenuToggle=function(t){console.log("AppComponent.onMenuToggle",t)},i}(t.Component);y.meta={selector:"[app-component]"};var b=function(t){function e(){var e;return(e=t.call(this)||this).index=0,e}a(e,t);var n=e.prototype;return n.onInit=function(){this.index=0},n.onOver=function(t){this.index=t,this.pushChanges()},e}(t.Component);b.meta={selector:"[card-serie]"};var w=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.onTween=function(){var e=t.getContext(this).node.querySelector(".title");this.title=e.innerHTML},i.onChange=function(t){},n}(t.Component);w.meta={selector:"[card-service]"};var k=function(e){function r(){return e.apply(this,arguments)||this}return a(r,e),r.prototype.onInit=function(){var e=this;this.initialFocus=!1;var r=t.getContext(this),o=r.module,s=r.node,a=r.parentInstance,l=(r.selector,this.event$=i.fromEvent(document,"click").pipe(n.filter((function(t){var n=t.target;if(s.contains(n)||!document.contains(n))e.initialFocus=!0;else if(e.initialFocus)return e.initialFocus=!1,!0})),n.shareReplay(1))),c=s.getAttribute("(clickOutside)");if(c){var u=o.makeFunction(c,["$event"]);l.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){o.resolve(u,a,t)}))}else a.clickOutside$=l},r}(t.Directive);k.meta={selector:"[(clickOutside)]"};var x=function(){function t(t){this.data=null,t&&(this.url=t.url,this.status=t.status,this.statusText=t.statusText,this.ok=t.ok,this.redirected=t.redirected)}return o(t,[{key:"static",get:function(){return this.url.indexOf(".json")===this.url.length-5}}]),t}(),S=function(){function t(){}return t.http$=function(t,e,r,o){var s=this;void 0===o&&(o="json"),t=-1!==e.indexOf(".json")?"GET":t;var a=null;return i.from(fetch(e,{method:t,headers:{Accept:"application/json","Content-Type":"application/json"},body:-1!==["POST","PUT","PATCH"].indexOf(t)?JSON.stringify(r):void 0}).then((function(t){return a=new x(t),t[o]().then((function(e){return a.data=e,t.ok?Promise.resolve(a):Promise.reject(a)}))}))).pipe(n.catchError((function(t){return i.throwError(s.getError(t,a))})))},t.get$=function(t,e,n){var i=this.query(e);return this.http$("GET",""+t+i,void 0,n)},t.delete$=function(t){return this.http$("DELETE",t)},t.post$=function(t,e){return this.http$("POST",t,e)},t.put$=function(t,e){return this.http$("PUT",t,e)},t.patch$=function(t,e){return this.http$("PATCH",t,e)},t.query=function(t){return""},t.getError=function(t,e){var n="object"==typeof t?t:{};return n.statusCode||(n.statusCode=e?e.status:0),n.statusMessage||(n.statusMessage=e?e.statusText:t),console.log("HttpService.getError",n,t),n},t}(),E=function(t){function i(){return t.apply(this,arguments)||this}a(i,t);var r=i.prototype;return r.onInit=function(){var t=this,i=window.data||{roles:[]},r=new e.FormGroup({firstName:new e.FormControl(null,e.Validators.RequiredValidator()),lastName:new e.FormControl(null,e.Validators.RequiredValidator()),email:new e.FormControl(null,[e.Validators.RequiredValidator(),e.Validators.EmailValidator()]),company:new e.FormControl(null),role:new e.FormControl(null,e.Validators.RequiredValidator()),country:new e.FormControl(null,e.Validators.RequiredValidator()),message:new e.FormControl(null),privacy:new e.FormControl(null,e.Validators.RequiredTrueValidator()),checkRequest:window.antiforgery,checkField:""}),o=r.controls;o.role.options=i.roles,this.controls=o,r.changes$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.pushChanges()})),this.data=i,this.form=r,this.error=null,this.success=!1},r.test=function(){var t=this.controls.role.options.length?this.controls.role.options[0].id:null;this.form.patch({firstName:"Jhon",lastName:"Appleseed",email:"jhonappleseed@gmail.com",company:"Websolute",country:"Italy",role:t,message:"Hi!",privacy:!0,checkRequest:window.antiforgery,checkField:""})},r.reset=function(){this.form.reset()},r.onSubmit=function(){var t=this;this.form.valid?(this.form.submitted=!0,S.post$("/api/contacts",this.form.value).subscribe((function(e){t.success=!0,t.form.reset()}),(function(e){console.log("ContactsComponent.error",e),t.error=e,t.pushChanges()}))):this.form.touched=!0},i}(t.Component);E.meta={selector:"[contacts]"};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var C=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t,e){t.exports=function(){var t=document,e=t.createTextNode.bind(t);function n(t,e,n){t.style.setProperty(e,n)}function i(t,e){return t.appendChild(e)}function r(e,n,r,o){var s=t.createElement("span");return n&&(s.className=n),r&&(!o&&s.setAttribute("data-"+n,r),s.textContent=r),e&&i(e,s)||s}function o(t,e){return t.getAttribute("data-"+e)}function s(e,n){return e&&0!=e.length?e.nodeName?[e]:[].slice.call(e[0].nodeName?e:(n||t).querySelectorAll(e)):[]}function a(t){for(var e=[];t--;)e[t]=[];return e}function l(t,e){t&&t.some(e)}function c(t){return function(e){return t[e]}}function u(t,e,i){var r="--"+e,o=r+"-index";l(i,(function(t,e){Array.isArray(t)?l(t,(function(t){n(t,o,e)})):n(t,o,e)})),n(t,r+"-total",i.length)}var h={};function p(t,e,n){var i=n.indexOf(t);if(-1==i)n.unshift(t),l(h[t].depends,(function(e){p(e,t,n)}));else{var r=n.indexOf(e);n.splice(i,1),n.splice(r,0,t)}return n}function f(t,e,n,i){return{by:t,depends:e,key:n,split:i}}function d(t){return p(t,0,[]).map(c(h))}function m(t){h[t.by]=t}function g(t,n,o,a,c){t.normalize();var u=[],h=document.createDocumentFragment();a&&u.push(t.previousSibling);var p=[];return s(t.childNodes).some((function(t){if(!t.tagName||t.hasChildNodes()){if(t.childNodes&&t.childNodes.length)return p.push(t),void u.push.apply(u,g(t,n,o,a,c));var i=t.wholeText||"",s=i.trim();s.length&&(" "===i[0]&&p.push(e(" ")),l(s.split(o),(function(t,e){e&&c&&p.push(r(h,"whitespace"," ",c));var i=r(h,n,t);u.push(i),p.push(i)}))," "===i[i.length-1]&&p.push(e(" ")))}else p.push(t)})),l(p,(function(t){i(h,t)})),t.innerHTML="",i(t,h),u}var v=0;function y(t,e){for(var n in e)t[n]=e[n];return t}var b="words",w=f(b,v,"word",(function(t){return g(t,"word",/\s+/,0,1)})),k="chars",x=f(k,[b],"char",(function(t,e,n){var i=[];return l(n[b],(function(t,n){i.push.apply(i,g(t,"char","",e.whitespace&&n))})),i}));function S(t){var e=(t=t||{}).key;return s(t.target||"[data-splitting]").map((function(n){var i=n["ðŸŒ"];if(!t.force&&i)return i;i=n["ðŸŒ"]={el:n};var r=d(t.by||o(n,"splitting")||k),s=y({},t);return l(r,(function(t){if(t.split){var r=t.by,o=(e?"-"+e:"")+t.key,a=t.split(n,s,i);o&&u(n,o,a),i[r]=a,n.classList.add(r)}})),n.classList.add("splitting"),i}))}function E(t){var e=(t=t||{}).target=r();return e.innerHTML=t.content,S(t),e.outerHTML}function C(t,e,n){var i=s(e.matching||t.children,t),r={};return l(i,(function(t){var e=Math.round(t[n]);(r[e]||(r[e]=[])).push(t)})),Object.keys(r).map(Number).sort(T).map(c(r))}function T(t,e){return t-e}S.html=E,S.add=m;var _=f("lines",[b],"line",(function(t,e,n){return C(t,{matching:n[b]},"offsetTop")})),O=f("items",v,"item",(function(t,e){return s(e.matching||t.children,t)})),L=f("rows",v,"row",(function(t,e){return C(t,e,"offsetTop")})),$=f("cols",v,"col",(function(t,e){return C(t,e,"offsetLeft")})),D=f("grid",["rows","cols"]),M="layout",F=f(M,v,v,(function(t,e){var a=e.rows=+(e.rows||o(t,"rows")||1),l=e.columns=+(e.columns||o(t,"columns")||1);if(e.image=e.image||o(t,"image")||t.currentSrc||t.src,e.image){var c=s("img",t)[0];e.image=c&&(c.currentSrc||c.src)}e.image&&n(t,"background-image","url("+e.image+")");for(var u=a*l,h=[],p=r(v,"cell-grid");u--;){var f=r(p,"cell");r(f,"cell-inner"),h.push(f)}return i(t,p),h})),A=f("cellRows",[M],"row",(function(t,e,n){var i=e.rows,r=a(i);return l(n[M],(function(t,e,n){r[Math.floor(e/(n.length/i))].push(t)})),r})),j=f("cellColumns",[M],"col",(function(t,e,n){var i=e.columns,r=a(i);return l(n[M],(function(t,e){r[e%i].push(t)})),r})),I=f("cells",["cellRows","cellColumns"],"cell",(function(t,e,n){return n[M]}));return m(w),m(x),m(_),m(O),m(L),m($),m(D),m(F),m(A),m(j),m(I),S}()})),T=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.onInit=function(){var e=this,n=t.getContext(this).node,i=n.querySelector(".brand");gsap.to(i,.4,{opacity:1,onComplete:function(){var t=n.querySelector(".btn--skip");gsap.to(t,.4,{opacity:1,delay:2,onComplete:function(){var t=0,i=n.querySelector("video");i.addEventListener("ended",(function n(){console.log("onEnded"),++t<2?i.play():(i.removeEventListener("ended",n),setTimeout((function(){e.skip.next()}),2e3))})),i.play()}})}});var r=n.querySelector(".title");C({target:[r]})},i.onSkip=function(t){this.skip.next()},n}(t.Component);T.meta={selector:"[cover-video]",outputs:["skip"]};var _=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.onInit=function(){var e=this,n=t.getContext(this).node,i=n.querySelector(".brand");gsap.to(i,.4,{opacity:1,onComplete:function(){var t=n.querySelector(".btn--skip");gsap.to(t,.4,{opacity:1,delay:3,onComplete:function(){var t=Array.prototype.slice.call(n.querySelectorAll(".background img"));gsap.to(t,{opacity:1,delay:2,duration:.6,stagger:{each:3,ease:Power0.easeNone},onComplete:function(){console.log("complete!"),setTimeout((function(){e.skip.next()}),4400)}}),gsap.to(t,{scale:1.05,delay:2,duration:4,stagger:{each:3,ease:Power0.easeNone}})}})}});var r=n.querySelector(".title");C({target:[r]})},i.onSkip=function(t){this.skip.next()},n}(t.Component);_.meta={selector:"[cover]",outputs:["skip"]};var O="dateFormats",L="timeFormats",$="dayPeriods",D="days",M="months",F="eras",A="numberSymbols",j="short",I="medium",R="long",H="full",P="narrow",U="short",N="abbreviated",q="wide",z={Sunday:"sunday",Monday:"monday",Tuesday:"tuesday",Wednesday:"wednesday",Thursday:"thursday",Friday:"friday",Saturday:"saturday"},B={January:"january",February:"february",March:"march",April:"april",May:"may",June:"june",July:"july",August:"august",September:"september",October:"october",November:"november",December:"december"},W="am",Y="pm",V="bc",G="ad",X="minusSign",J=function(){function t(){}return t.getLocale=function(){var e=window.locale||t.defaultLocale,n=Array.prototype.slice.call(arguments).join(".");return e[n]||"{"+n+"}"},t.getObjectLocale=function(){for(var t,e=0;e<arguments.length;e++){var n=arguments[e];t=t?t[n]:locale[n]}return t},t.toLocaleString=function(t,e){var n=this;void 0===e&&(e={});for(var i=arguments.length,r=new Array(i>2?i-2:0),o=2;o<i;o++)r[o-2]=arguments[o];return"string"==typeof t?e[r.join(".")]=t:Object.keys(t).forEach((function(i){var o=r.slice();o.push(i),e=n.toLocaleString.apply(n,[t[i],e].concat(o))})),e},t.toLocaleObject=function(t,e,n){var i=this;return void 0===n&&(n={}),"string"==typeof t?n[e]=t:(e&&(n=n[e]={}),Object.keys(t).forEach((function(e){n=i.toLocaleObject(t[e],e,n)}))),n},t}();J.defaultLocale=J.toLocaleString({id:"it",dateFormats:{short:"dd/MM/yy",medium:"d MMM y",long:"d MMMM y",full:"EEEE d MMMM y"},timeFormats:{short:"HH:mm",medium:"HH:mm:ss",long:"HH:mm:ss z",full:"HH:mm:ss zzzz"},dayPeriods:{narrow:{am:"m",pm:"p"},abbreviated:{am:"AM",pm:"PM"},wide:{am:"AM",pm:"PM"}},days:{narrow:{sunday:"D",monday:"L",tuesday:"M",wednesday:"M",thursday:"G",friday:"V",saturday:"S"},short:{sunday:"Do",monday:"Lu",tuesday:"Ma",wednesday:"Me",thursday:"Gi",friday:"Ve",saturday:"Sa"},abbreviated:{sunday:"Dom",monday:"Lun",tuesday:"Mar",wednesday:"Mer",thursday:"Gio",friday:"Ven",saturday:"Sab"},wide:{sunday:"Domenica",monday:"LunedÃ¬",tuesday:"MartedÃ¬",wednesday:"MercoledÃ¬",thursday:"GiovedÃ¬",friday:"VenerdÃ¬",saturday:"Sabato"}},months:{narrow:{january:"G",february:"F",march:"M",april:"A",may:"M",june:"G",july:"L",august:"A",september:"S",october:"O",november:"N",december:"D"},abbreviated:{january:"Gen",february:"Feb",march:"Mar",april:"Apr",may:"Mag",june:"Giu",july:"Lug",august:"Ago",september:"Set",october:"Ott",november:"Nov",december:"Dic"},wide:{january:"Gennaio",february:"Febbraio",march:"Marzo",april:"Aprile",may:"Maggio",june:"Giugno",july:"Luglio",august:"Agosto",september:"Settembre",october:"Ottobre",november:"Novembre",december:"Dicembre"}},eras:{narrow:{bc:"aC",ad:"dC"},abbreviated:{bc:"a.C.",ad:"d.C."},wide:{bc:"avanti Cristo",ad:"dopo Cristo"}},numberSymbols:{decimal:",",group:".",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"Ã—",perMille:"â€°",infinite:"âˆž",nan:"NaN",timeSeparator:":"}});var K="short",Z="shortGmt",Q="long",tt="extended",et="fullYear",nt="month",it="date",rt="hours",ot="minutes",st="seconds",at="milliseconds",lt="day";function ct(t,e,n,i,r){void 0===n&&(n="-");var o="";r&&t<=0?t=1-t:t<0&&(t=-t,o=n);for(var s=String(t);s.length<e;)s="0"+s;return i&&(s=s.substr(s.length-e)),o+s}var ut=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ht=function(){function t(){}return t.getDatePart=function(t,e){switch(t){case et:return e.getFullYear();case nt:return e.getMonth();case it:return e.getDate();case lt:return e.getDay();case rt:return e.getHours();case ot:return e.getMinutes();case st:return e.getSeconds();case at:return e.getMilliseconds();default:throw new Error('Unknown DatePart value "'+t+'".')}},t.formatMilliseconds=function(t,e){return ct(t,3).substr(0,e)},t.getDateFormatter=function(e,n,i,r,o){return void 0===i&&(i=0),void 0===r&&(r=!1),void 0===o&&(o=!1),function(s,a){var l=t.getDatePart(e,s);if((i>0||l>-i)&&(l+=i),e===rt)0===l&&-12===i&&(l=12);else if(e===at)return t.formatMilliseconds(l,n);var c=J.getLocale(A,X);return ct(l,n,c,r,o)}},t.getDateTranslation=function(t,e,n,i){switch(e){case D:return J.getLocale(D,n,Object.values(z)[t.getDay()]);case M:return J.getLocale(M,n,Object.values(B)[t.getMonth()]);case $:var r=t.getHours();return J.getLocale($,n,r<12?W:Y);case F:return J.getLocale(F,n,t.getFullYear()<=0?V:G);default:throw new Error("unknown translation type "+e)}},t.getDateLocaleFormatter=function(e,n,i){return void 0===i&&(i=!1),function(r){return t.getDateTranslation(r,e,n,i)}},t.getWeekFirstThursdayOfYear=function(t){var e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)},t.getWeekThursday=function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))},t.getWeekFormatter=function(e,n){return void 0===n&&(n=!1),function(i,r){var o;if(n){var s=new Date(i.getFullYear(),i.getMonth(),1).getDay()-1,a=i.getDate();o=1+Math.floor((a+s)/7)}else{var l=t.getWeekFirstThursdayOfYear(i.getFullYear()),c=t.getWeekThursday(i).getTime()-l.getTime();o=1+Math.round(c/6048e5)}return ct(o,e,J.getLocale(A,X))}},t.getTimezoneFormatter=function(t){return function(e,n){var i=-1*n,r=J.getLocale(A,X),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case K:return(i>=0?"+":"")+ct(o,2,r)+ct(Math.abs(i%60),2,r);case Z:return"GMT"+(i>=0?"+":"")+ct(o,1,r);case Q:return"GMT"+(i>=0?"+":"")+ct(o,2,r)+":"+ct(Math.abs(i%60),2,r);case tt:return 0===n?"Z":(i>=0?"+":"")+ct(o,2,r)+":"+ct(Math.abs(i%60),2,r);default:throw new Error('Unknown zone width "'+t+'"')}}},t.getFormatter=function(e){var n;switch(e){case"y":n=t.getDateFormatter(et,1,0,!1,!0);break;case"yy":n=t.getDateFormatter(et,2,0,!0,!0);break;case"yyy":n=t.getDateFormatter(et,3,0,!1,!0);break;case"yyyy":n=t.getDateFormatter(et,4,0,!1,!0);break;case"M":case"L":n=t.getDateFormatter(nt,1,1);break;case"MM":case"LL":n=t.getDateFormatter(nt,2,1);break;case"d":n=t.getDateFormatter(it,1);break;case"dd":n=t.getDateFormatter(it,2);break;case"h":n=t.getDateFormatter(rt,1,-12);break;case"hh":n=t.getDateFormatter(rt,2,-12);break;case"H":n=t.getDateFormatter(rt,1);break;case"HH":n=t.getDateFormatter(rt,2);break;case"m":n=t.getDateFormatter(ot,1);break;case"mm":n=t.getDateFormatter(ot,2);break;case"s":n=t.getDateFormatter(st,1);break;case"ss":n=t.getDateFormatter(st,2);break;case"S":n=t.getDateFormatter(at,1);break;case"SS":n=t.getDateFormatter(at,2);break;case"SSS":n=t.getDateFormatter(at,3);break;case"MMM":n=t.getDateLocaleFormatter(M,N);break;case"MMMM":n=t.getDateLocaleFormatter(M,q);break;case"MMMMM":n=t.getDateLocaleFormatter(M,P);break;case"LLL":n=t.getDateLocaleFormatter(M,N,FormStyle.Standalone);break;case"LLLL":n=t.getDateLocaleFormatter(M,q,FormStyle.Standalone);break;case"LLLLL":n=t.getDateLocaleFormatter(M,P,FormStyle.Standalone);break;case"E":case"EE":case"EEE":n=t.getDateLocaleFormatter(D,N);break;case"EEEE":n=t.getDateLocaleFormatter(D,q);break;case"EEEEE":n=t.getDateLocaleFormatter(D,P);break;case"EEEEEE":n=t.getDateLocaleFormatter(D,U);break;case"a":case"aa":case"aaa":n=t.getDateLocaleFormatter($,N);break;case"aaaa":n=t.getDateLocaleFormatter($,q);break;case"aaaaa":n=t.getDateLocaleFormatter($,P);break;case"b":case"bb":case"bbb":n=t.getDateLocaleFormatter($,N,FormStyle.Standalone,!0);break;case"bbbb":n=t.getDateLocaleFormatter($,q,FormStyle.Standalone,!0);break;case"bbbbb":n=t.getDateLocaleFormatter($,P,FormStyle.Standalone,!0);break;case"B":case"BB":case"BBB":n=t.getDateLocaleFormatter($,N,FormStyle.Format,!0);break;case"BBBB":n=t.getDateLocaleFormatter($,q,FormStyle.Format,!0);break;case"BBBBB":n=t.getDateLocaleFormatter($,P,FormStyle.Format,!0);break;case"GGGGG":n=t.getDateLocaleFormatter(F,P);break;case"G":case"GG":case"GGG":n=t.getDateLocaleFormatter(F,N);break;case"GGGG":n=t.getDateLocaleFormatter(F,q);break;case"w":n=t.getWeekFormatter(1);break;case"ww":n=t.getWeekFormatter(2);break;case"W":n=t.getWeekFormatter(1,!0);break;case"Z":case"ZZ":case"ZZZ":n=t.getTimezoneFormatter(K);break;case"ZZZZZ":n=t.getTimezoneFormatter(tt);break;case"O":case"OO":case"OOO":n=t.getTimezoneFormatter(Z);break;case"z":case"zz":case"zzz":n=t.getTimezoneFormatter(Z);break;case"OOOO":case"ZZZZ":case"zzzz":n=t.getTimezoneFormatter(Q);break;default:return null}return n},t.setTimezoneOffset=function(t,e){t=t.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n},t.dateTimezoneToLocal=function(e,n,i){var r=i?-1:1,o=e.getTimezoneOffset(),s=r*(t.setTimezoneOffset(n,o)-o);return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+s),e},t.parseDate=function(t){return t instanceof Date?t:new Date(Date.parse(t))},t.getNamedFormat=function(e){var n="";switch(e){case"shortDate":n=J.getLocale(O,j);break;case"mediumDate":n=J.getLocale(O,I);break;case"longDate":n=J.getLocale(O,R);break;case"fullDate":n=J.getLocale(O,H);break;case"shortTime":n=J.getLocale(L,j);break;case"mediumTime":n=J.getLocale(L,I);break;case"longTime":n=J.getLocale(L,R);break;case"fullTime":n=J.getLocale(L,H);break;case"short":n=t.getNamedFormat("shortTime")+" "+t.getNamedFormat("shortDate");break;case"medium":n=t.getNamedFormat("mediumTime")+" "+t.getNamedFormat("mediumDate");break;case"long":n=t.getNamedFormat("longTime")+" "+t.getNamedFormat("longDate");break;case"full":n=t.getNamedFormat("fullTime")+" "+t.getNamedFormat("fullDate")}return n},t.formatDate=function(e,n,i){var r=t.parseDate(e);n=t.getNamedFormat(n)||n;for(var o,s=[];n;){if(!(o=ut.exec(n))){s.push(n);break}var a=(s=s.concat(o.slice(1))).pop();if(!a)break;n=a}var l=r.getTimezoneOffset();i&&(l=t.setTimezoneOffset(i,l),r=t.dateTimezoneToLocal(r,i,!0));var c="";return s.forEach((function(e){var n=t.getFormatter(e);c+=n?n(r,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),c},t}(),pt=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.transform=function(t,e){return void 0===e&&(e="short"),ht.formatDate(t,e)},e}(t.Pipe);pt.meta={name:"date"};var ft=1e6,dt=function(e){function i(){return e.apply(this,arguments)||this}a(i,e);var r=i.prototype;return r.onInit=function(){var e=this,r=t.getContext(this).node,o=r.getAttribute("dropdown-trigger");this.trigger=o?r.querySelector(o):r,this.opened=null,this.onClick=this.onClick.bind(this),this.onDocumentClick=this.onDocumentClick.bind(this),this.openDropdown=this.openDropdown.bind(this),this.closeDropdown=this.closeDropdown.bind(this),this.addListeners(),i.dropdown$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.id===t?r.classList.add("dropped"):r.classList.remove("dropped")}))},r.onClick=function(e){var n=t.getContext(this).node;null===this.opened?this.openDropdown():n.querySelector("[dropdown-item]")||this.closeDropdown()},r.onDocumentClick=function(e){var n=t.getContext(this).node;n===e.target||n.contains(e.target)||this.closeDropdown()},r.openDropdown=function(){null===this.opened&&(this.opened=!0,this.addDocumentListeners(),i.dropdown$.next(this.id),this.dropped.next(this.id))},r.closeDropdown=function(){null!==this.opened&&(this.removeDocumentListeners(),this.opened=null,i.dropdown$.getValue()===this.id&&(i.dropdown$.next(null),this.dropped.next(null)))},r.addListeners=function(){this.trigger.addEventListener("click",this.onClick)},r.addDocumentListeners=function(){document.addEventListener("click",this.onDocumentClick)},r.removeListeners=function(){this.trigger.removeEventListener("click",this.onClick)},r.removeDocumentListeners=function(){document.removeEventListener("click",this.onDocumentClick)},r.onDestroy=function(){this.removeListeners(),this.removeDocumentListeners()},i.nextId=function(){return ft++},o(i,[{key:"id",get:function(){return this.dropdown||this.id_||(this.id_=i.nextId())}}]),i}(t.Directive);dt.meta={selector:"[dropdown]",inputs:["dropdown","dropdown-trigger"],outputs:["dropped"]},dt.dropdown$=new i.BehaviorSubject(null);var mt=function(e){function i(){return e.apply(this,arguments)||this}return a(i,e),i.prototype.onInit=function(){var e=this,i=t.getContext(this).node;i.classList.add("dropdown-item"),dt.dropdown$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.id===t?i.classList.add("dropped"):i.classList.remove("dropped")}))},o(i,[{key:"id",get:function(){return this["dropdown-item"]}}]),i}(t.Directive);mt.meta={selector:"[dropdown-item], [[dropdown-item]]",inputs:["dropdown-item"]};var gt=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this,r=t.getContext(this).node;this.images=Array.prototype.slice.call(r.querySelectorAll("img"));this.index=0,i.interval(2500).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){e.onNext()}))},o.onNext=function(){this.index=(this.index+1)%this.images.length,this.pushChanges()},r}(t.Component);gt.meta={selector:"[fading-gallery]"};var vt=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.onChanges=function(){var e=t.getContext(this).node,n=this.control.flags;Object.keys(n).forEach((function(t){n[t]?e.classList.add(t):e.classList.remove(t)}))},n}(t.Component);vt.meta={selector:"[control]",inputs:["control"]};var yt=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.onInit=function(){this.label="label"},e}(vt);yt.meta={selector:"[control-checkbox]",inputs:["control","label"],template:'\n\t\t<div class="group--form--checkbox" [class]="{ required: control.validators.length }">\n\t\t\t<label>\n\t\t\t\t<input type="checkbox" class="control--checkbox" [formControl]="control" [value]="true" />\n\t\t\t\t<span [innerHTML]="label | html"></span>\n\t\t\t</label>\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var bt=function(){function t(){}return t.keydown$=function(){return i.fromEvent(window,"keydown").pipe(n.shareReplay(1))},t.keyup$=function(){return i.fromEvent(window,"keyup").pipe(n.shareReplay(1))},t.typing$=function(){var t,e="";return this.key$().pipe(n.map((function(n){return t&&clearTimeout(t),e+=n,t=setTimeout((function(){e=""}),1500),e})),n.shareReplay(1))},t.key$=function(){var t=/\w/;return this.keydown$().pipe(n.filter((function(e){return e.key&&e.key.match(t)})),n.map((function(t){return t.key})),n.shareReplay(1))},t}(),wt=function(e){function i(){return e.apply(this,arguments)||this}a(i,e);var r=i.prototype;return r.onInit=function(){var t=this;this.label="label",this.labels=window.labels||{},this.dropped=!1,this.dropdownId=dt.nextId(),bt.typing$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.scrollToWord(e)}))},r.scrollToWord=function(e){for(var n=this.control.options||[],i=-1,r=0;r<n.length;r++){if(0===n[r].name.toLowerCase().indexOf(e.toLowerCase())){i=r;break}}if(-1!==i){var o=t.getContext(this).node,s=o.querySelector(".dropdown"),a=o.querySelector(".nav--dropdown").children[i];s.scrollTo(0,a.offsetTop)}},r.setOption=function(t){if(console.log("setOption",t,this.isMultiple),this.isMultiple){var e=this.control.value||[],n=e.indexOf(t.id);-1!==n?e.splice(n,1):e.push(t.id),this.control.value=e.length?e.slice():null}else this.control.value=t.id},r.hasOption=function(t){return this.isMultiple?-1!==(this.control.value||[]).indexOf(t.id):this.control.value===t.id},r.onDropped=function(t){},r.getLabel=function(){var t=this.control.value,e=this.control.options||[];if(this.isMultiple)return(t=t||[]).length?t.map((function(t){var n=e.find((function(e){return e.id===t||e.name===t}));return n?n.name:""})).join(", "):this.labels.select;var n=e.find((function(e){return e.id===t||e.name===t}));return n?n.name:this.labels.select},r.onDropped=function(t){this.dropped=t===this.dropdownId},o(i,[{key:"isMultiple",get:function(){return this.multiple&&!1!==this.multiple&&"false"!==this.multiple}}]),i}(vt);wt.meta={selector:"[control-custom-select]",inputs:["control","label","multiple"],template:'\n\t\t<div class="group--form--select" [class]="{ required: control.validators.length, multiple: isMultiple }" [dropdown]="dropdownId" (dropped)="onDropped($event)">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<span class="control--select" [innerHTML]="getLabel()"></span>\n\t\t\t<svg class="icon icon--caret-down"><use xlink:href="#caret-down"></use></svg>\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t\t<div class="dropdown" [dropdown-item]="dropdownId">\n\t\t\t<div class="category" [innerHTML]="label"></div>\n\t\t\t<ul class="nav--dropdown" [class]="{ multiple: isMultiple }">\n\t\t\t<li *for="let item of control.options" (click)="setOption(item)"><span [class]="{ active: hasOption(item) }" [innerHTML]="item.name"></span></li>\n\t\t\t</ul>\n\t\t</div>\n\t'};var kt=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.onInit=function(){this.label="label",this.required=!1},e}(vt);kt.meta={selector:"[control-text]",inputs:["control","label"],template:'\n\t\t<div class="group--form" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<input type="text" class="control--text" [formControl]="control" [placeholder]="label" />\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var xt=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.onInit=function(){this.label="label",this.required=!1},e}(vt);xt.meta={selector:"[control-textarea]",inputs:["control","label"],template:'\n\t\t<div class="group--form--textarea" [class]="{ required: control.validators.length }">\n\t\t\t<label [innerHTML]="label"></label>\n\t\t\t<textarea class="control--text" [formControl]="control" [innerHTML]="label" rows="4"></textarea>\n\t\t\t<span class="required__badge">required</span>\n\t\t</div>\n\t\t<errors-component [control]="control"></errors-component>\n\t'};var St=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.onInit=function(){this.labels=window.labels||{}},n.getLabel=function(t,e){return this.labels["error_"+t]},e}(vt);St.meta={selector:"errors-component",inputs:["control"],template:'\n\t<div class="inner" [style]="{ display: control.invalid && control.touched ? \'block\' : \'none\' }">\n\t\t<div class="error" *for="let [key, value] of control.errors">\n\t\t\t<span [innerHTML]="getLabel(key, value)"></span>\n\t\t\t\x3c!-- <span class="key" [innerHTML]="key"></span> <span class="value" [innerHTML]="value | json"></span> --\x3e\n\t\t</div>\n\t</div>\n\t'};var Et="undefined"!=typeof module&&module.exports,Ct=((Et?{get:function(){}}:new URLSearchParams(window.location.search)).get("debug"),Et?null:document.querySelector("base").getAttribute("href")),Tt=!Et&&(window&&("40525"===window.location.port||"actarian.github.io"===window.location.host||"cantalupi.herokuapp.com"===window.location.host)),_t=!Et&&(window&&-1!==["localhost","127.0.0.1","0.0.0.0"].indexOf(window.location.host.split(":")[0])),Ot={NAME:"cantalupi",STATIC:Tt,DEVELOPMENT:_t,PRODUCTION:!_t,RESOURCE:"/docs/",STATIC_RESOURCE:"./",API:"/wp-json/cantalupi/v1",STATIC_API:_t&&!Tt?"/Client/docs/api":"./api"};function Lt(t,e){return""+(e||Tt?Ot.STATIC_API:Ot.API)+t+(e||Tt?".json":"")}new(function(){function t(t){t&&Object.assign(this,t)}return o(t,[{key:"href",get:function(){return-1!==window.location.host.indexOf("herokuapp")?"https://raw.githubusercontent.com/actarian/cantalupi/master/docs/":Ct}},{key:"host",get:function(){var t=window.location.host.replace("127.0.0.1","192.168.1.2");return"/"===t.substr(t.length-1,1)&&(t=t.substr(0,t.length-1)),window.location.protocol+"//"+t+Ct}}]),t}())({port:5e3});var $t=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.onInit=function(){this.env=Ot},n.onTest=function(t){this.test.next(t)},n.onReset=function(t){this.reset.next(t)},e}(t.Component);$t.meta={selector:"test-component",inputs:["form"],outputs:["test","reset"],template:'\n\t<div class="group--form--results" *if="env.DEVELOPMENT">\n\t\t<code [innerHTML]="form.value | json"></code>\n\t\t<button type="button" class="btn--link" (click)="onTest($event)"><span>test</span></button>\n\t\t<button type="button" class="btn--link" (click)="onReset($event)"><span>reset</span></button>\n\t</div>\n\t'};var Dt=function(t){this.data=t},Mt=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(Dt),Ft=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(Dt),At=function(){function t(){}return t.open$=function(t){var e=this;return this.getTemplate$(t.src).pipe(n.map((function(n){return{node:e.getNode(n),data:t.data,modal:t}})),n.tap((function(t){return e.modal$.next(t)})),n.switchMap((function(t){return e.events$})))},t.load$=function(t){},t.getTemplate$=function(t){return i.from(fetch(t).then((function(t){return t.text()})))},t.getNode=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild},t.reject=function(t){this.modal$.next(null),this.events$.next(new Ft(t))},t.resolve=function(t){this.modal$.next(null),this.events$.next(new Mt(t))},t}();At.modal$=new i.Subject,At.events$=new i.Subject;var jt=function(e){function i(){return e.apply(this,arguments)||this}a(i,e);var r=i.prototype;return r.onInit=function(){var e=this,i=t.getContext(this).node;this.modalNode=i.querySelector(".modal-outlet__modal"),At.modal$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.modal=t}))},r.onRegister=function(t){this.pushChanges()},r.onLogin=function(t){this.pushChanges()},r.reject=function(t){At.reject()},o(i,[{key:"modal",get:function(){return this.modal_},set:function(e){var n=t.getContext(this).module;if(this.modal_&&this.modal_.node&&(n.remove(this.modal_.node,this),this.modalNode.removeChild(this.modal_.node)),e&&e.node){this.modal_=e,this.modalNode.appendChild(e.node);n.compile(e.node)}this.modal_=e,this.pushChanges()}}]),i}(t.Component);jt.meta={selector:"[modal-outlet]",template:'\n\t<div class="modal-outlet__container" [class]="{ active: modal }">\n\t\t<div class="modal-outlet__background" (click)="reject($event)"></div>\n\t\t<div class="modal-outlet__modal"></div>\n\t</div>\n\t'};var It=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.onInit=function(){e.prototype.onInit.call(this);var n=t.getContext(this),i=n.parentInstance;n.node;if(i instanceof jt){var r=this.data=i.modal.data;this.sliderItems=r.items,this.sliderIndex=r.index}},i.close=function(){At.reject()},i.onChange=function(t){},i.onTween=function(t){},n}(t.Component);function Rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Pt(t,e,n){return e&&Ht(t.prototype,e),n&&Ht(t,n),t}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){Ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vt(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Yt(t):e}function Gt(t,e,n){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Xt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}It.meta={selector:"[gallery-modal]"};var Jt={el:document,elMobile:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,smoothMobile:!1,direction:"vertical",lerp:.1,class:"is-inview",scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,scrollFromAnywhere:!1},Kt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rt(this,t),Object.assign(this,Jt,e),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.els=[],this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:this.html.offsetHeight},this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return Pt(t,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var t=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame((function(){t.resize(),t.resizeTick=!1})))}},{key:"resize",value:function(){}},{key:"initEvents",value:function(){var t=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach((function(e){e.addEventListener("click",t.setScrollTo,!1)}))}},{key:"setScrollTo",value:function(t){t.preventDefault(),this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),t.currentTarget.getAttribute("data-".concat(this.name,"-offset")))}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(t){var e=this,n=this.instance.scroll.y,i=n+this.windowHeight;this.els.forEach((function(r,o){!r||r.inView&&!t||i>=r.top&&n<r.bottom&&e.setInView(r,o),r&&r.inView&&(i<r.top||n>r.bottom)&&e.setOutOfView(r,o)})),this.els=this.els.filter((function(t,e){return null!==t})),this.hasScrollTicking=!1}},{key:"setInView",value:function(t,e){this.els[e].inView=!0,t.el.classList.add(t.class),t.call&&this.hasCallEventSet&&(this.dispatchCall(t,"enter"),t.repeat||(this.els[e].call=!1)),t.repeat||t.speed||t.sticky||(!t.call||t.call&&this.hasCallEventSet)&&(this.els[e]=null)}},{key:"setOutOfView",value:function(t,e){(t.repeat||void 0!==t.speed)&&(this.els[e].inView=!1),t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit"),t.repeat&&t.el.classList.remove(t.class)}},{key:"dispatchCall",value:function(t,e){this.callWay=e,this.callValue=t.call.split(",").map((function(t){return t.trim()})),this.callObj=t,1==this.callValue.length&&(this.callValue=this.callValue[0]);var n=new Event(this.namespace+"call");this.el.dispatchEvent(n)}},{key:"dispatchScroll",value:function(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]);var n=this.listeners[t];n.push(e),1===n.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),"call"===t&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(t,e){if(this.listeners[t]){var n=this.listeners[t],i=n.indexOf(e);i<0||(n.splice(i,1),0===n.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,!1))}}},{key:"checkEvent",value:function(t){var e=this,n=t.type.replace(this.namespace,""),i=this.listeners[n];i&&0!==i.length&&i.forEach((function(t){switch(n){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}}))}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var t=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach((function(e){t.el.removeEventListener(t.namespace+e,t.checkEvent,!1)})),this.listeners={},this.scrollToEls.forEach((function(e){e.removeEventListener("click",t.setScrollTo,!1)}))}}]),t}(),Zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Qt(t,e){return t(e={exports:{}},e.exports),e.exports}var te=Qt((function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var n,i=t.HTMLElement||t.Element,r={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:i.prototype.scroll||a,scrollIntoView:i.prototype.scrollIntoView},o=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,s=(n=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?d.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):r.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?r.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):d.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var t=arguments[0].left,e=arguments[0].top;d.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var n=p(this),i=n.getBoundingClientRect(),o=this.getBoundingClientRect();n!==e.body?(d.call(this,n,n.scrollLeft+o.left-i.left,n.scrollTop+o.top-i.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):t.scrollBy({left:o.left,top:o.top,behavior:"smooth"})}else r.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function a(t,e){this.scrollLeft=t,this.scrollTop=e}function l(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(t,e){return"Y"===e?t.clientHeight+s<t.scrollHeight:"X"===e?t.clientWidth+s<t.scrollWidth:void 0}function u(e,n){var i=t.getComputedStyle(e,null)["overflow"+n];return"auto"===i||"scroll"===i}function h(t){var e=c(t,"Y")&&u(t,"Y"),n=c(t,"X")&&u(t,"X");return e||n}function p(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}function f(e){var n,i,r,s,a=(o()-e.startTime)/468;s=a=a>1?1:a,n=.5*(1-Math.cos(Math.PI*s)),i=e.startX+(e.x-e.startX)*n,r=e.startY+(e.y-e.startY)*n,e.method.call(e.scrollable,i,r),i===e.x&&r===e.y||t.requestAnimationFrame(f.bind(t,e))}function d(n,i,s){var l,c,u,h,p=o();n===e.body?(l=t,c=t.scrollX||t.pageXOffset,u=t.scrollY||t.pageYOffset,h=r.scroll):(l=n,c=n.scrollLeft,u=n.scrollTop,h=a),f({scrollable:l,method:h,startTime:p,startX:c,startY:u,x:i,y:s})}}}})),ee=(te.polyfill,function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Rt(this,e),t=Vt(this,Bt(e).call(this,n)),window.addEventListener("scroll",t.checkScroll,!1),te.polyfill(),t}return zt(e,t),Pt(e,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),Gt(Bt(e.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var t=this;Gt(Bt(e.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.instance.scroll.y=window.pageYOffset,this.els.length&&(this.hasScrollTicking||(requestAnimationFrame((function(){t.detectElements()})),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/(Date.now()-this.timestamp):this.instance.speed=0}},{key:"resize",value:function(){this.els.length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var t=this;this.els=[],this.el.querySelectorAll("[data-"+this.name+"]").forEach((function(e,n){var i=e.dataset[t.name+"Class"]||t.class,r=e.getBoundingClientRect().top+t.instance.scroll.y,o=r+e.offsetHeight,s="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,a=e.dataset[t.name+"Repeat"],l=e.dataset[t.name+"Call"];a="false"!=a&&(null!=a||t.repeat);var c=t.getRelativeOffset(s),u={el:e,id:n,class:i,top:r+c[0],bottom:o-c[1],offset:s,repeat:a,inView:!!e.classList.contains(i),call:l};t.els.push(u)}))}},{key:"updateElements",value:function(){var t=this;this.els.forEach((function(e,n){var i=e.el.getBoundingClientRect().top+t.instance.scroll.y,r=i+e.el.offsetHeight,o=t.getRelativeOffset(e.offset);t.els[n].top=i+o[0],t.els[n].bottom=r-o[1]})),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(t){var e=[0,0];if(t)for(var n=0;n<t.length;n++)"string"==typeof t[n]?t[n].includes("%")?e[n]=parseInt(t[n].replace("%","")*this.windowHeight/100):e[n]=parseInt(t[n]):e[n]=t[n];return e}},{key:"scrollTo",value:function(t,e,n,i,r,o){var s,a=e?parseInt(e):0;if("string"==typeof t){if("top"===t)s=this.html;else if("bottom"===t)s=this.html.offsetHeight-window.innerHeight;else if(!(s=document.querySelector(t)))return}else if("number"==typeof t)s=parseInt(t);else{if(!t||!t.tagName)return void console.warn("`targetOption` parameter is not valid");s=t}if(a="number"!=typeof s?s.getBoundingClientRect().top+a+this.instance.scroll.y:s+a,o){a=a.toFixed();window.addEventListener("scroll",(function t(){window.pageYOffset.toFixed()===a&&(window.removeEventListener("scroll",t),o())}))}window.scrollTo({top:a,behavior:"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){Gt(Bt(e.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),e}(Kt)),ne=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;function oe(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var se=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,i,r=oe(t),o=1;o<arguments.length;o++){for(var s in n=Object(arguments[o]))ie.call(n,s)&&(r[s]=n[s]);if(ne){i=ne(n);for(var a=0;a<i.length;a++)re.call(n,i[a])&&(r[i[a]]=n[i[a]])}}return r};function ae(){}ae.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,s=i.length;o<s;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}};var le=ae,ce=Qt((function(t,e){(function(){(null!==e?e:this).Lethargy=function(){function t(t,e,n,i){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this),this.lastDownDeltas=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this),this.deltasTimestamp=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this)}return t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,n,i,r,o,s,a;return null===(e=-1===t?this.lastDownDeltas:this.lastUpDeltas)[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(i=e.slice(0,this.stability),n=e.slice(this.stability,2*this.stability),a=i.reduce((function(t,e){return t+e})),o=n.reduce((function(t,e){return t+e})),s=a/i.length,r=o/n.length,Math.abs(s)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(Zt)})),ue={hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1},he=Object.prototype.toString,pe=Object.prototype.hasOwnProperty;function fe(t,e){return function(){return t.apply(e,arguments)}}var de=ce.Lethargy,me="virtualscroll",ge=xe,ve=37,ye=38,be=39,we=40,ke=32;function xe(t){!function(t){if(!t)return console.warn("bindAll requires at least one argument.");var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var n in t)pe.call(t,n)&&"function"==typeof t[n]&&"[object Function]"==he.call(t[n])&&e.push(n);for(var i=0;i<e.length;i++){var r=e[i];t[r]=fe(t[r],t)}}(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=se({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new de),this._emitter=new le,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}function Se(t,e,n){return(1-n)*t+n*e}function Ee(t){var e={};if(window.getComputedStyle){var n=getComputedStyle(t),i=n.transform||n.webkitTransform||n.mozTransform,r=i.match(/^matrix3d\((.+)\)$/);return r?(e.x=r?parseFloat(r[1].split(", ")[12]):0,e.y=r?parseFloat(r[1].split(", ")[13]):0):(r=i.match(/^matrix\((.+)\)$/),e.x=r?parseFloat(r[1].split(", ")[4]):0,e.y=r?parseFloat(r[1].split(", ")[5]):0),e}}function Ce(t){for(var e=[];t&&t!==document;t=t.parentNode)e.push(t);return e}xe.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(me,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},xe.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||!1!==this._lethargy.check(t)){var n=this._event;n.deltaX=t.wheelDeltaX||-1*t.deltaX,n.deltaY=t.wheelDeltaY||-1*t.deltaY,ue.isFirefox&&1==t.deltaMode&&(n.deltaX*=e.firefoxMultiplier,n.deltaY*=e.firefoxMultiplier),n.deltaX*=e.mouseMultiplier,n.deltaY*=e.mouseMultiplier,this._notify(t)}},xe.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||!1!==this._lethargy.check(t)){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0,e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta,this._notify(t)}},xe.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX,this.touchStartY=e.pageY},xe.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var n=this._event,i=t.targetTouches?t.targetTouches[0]:t;n.deltaX=(i.pageX-this.touchStartX)*e.touchMultiplier,n.deltaY=(i.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=i.pageX,this.touchStartY=i.pageY,this._notify(t)},xe.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var n=window.innerHeight-40;switch(t.keyCode){case ve:case ye:e.deltaY=this.options.keyStep;break;case be:case we:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=n;break;case ke:e.deltaY=-n;break;default:return}this._notify(t)},xe.prototype._bind=function(){ue.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),ue.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),ue.hasTouch&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),ue.hasPointer&&ue.hasTouchWin&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),ue.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},xe.prototype._unbind=function(){ue.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel),ue.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel),ue.hasTouch&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),ue.hasPointer&&ue.hasTouchWin&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),ue.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},xe.prototype.on=function(t,e){this._emitter.on(me,t,e);var n=this._emitter.e;n&&n[me]&&1===n[me].length&&this._bind()},xe.prototype.off=function(t,e){this._emitter.off(me,t,e);var n=this._emitter.e;(!n[me]||n[me].length<=0)&&this._unbind()},xe.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},xe.prototype.destroy=function(){this._emitter.off(),this._unbind()};var Te=.1,_e="function"==typeof Float32Array;function Oe(t,e){return 1-3*e+3*t}function Le(t,e){return 3*e-6*t}function $e(t){return 3*t}function De(t,e,n){return((Oe(e,n)*t+Le(e,n))*t+$e(e))*t}function Me(t,e,n){return 3*Oe(e,n)*t*t+2*Le(e,n)*t+$e(e)}function Fe(t){return t}var Ae=function(t,e,n,i){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===i)return Fe;for(var r=_e?new Float32Array(11):new Array(11),o=0;o<11;++o)r[o]=De(o*Te,t,n);function s(e){for(var i=0,o=1;10!==o&&r[o]<=e;++o)i+=Te;--o;var s=i+(e-r[o])/(r[o+1]-r[o])*Te,a=Me(s,t,n);return a>=.001?function(t,e,n,i){for(var r=0;r<4;++r){var o=Me(e,n,i);if(0===o)return e;e-=(De(e,n,i)-t)/o}return e}(e,s,t,n):0===a?s:function(t,e,n,i,r){var o,s,a=0;do{(o=De(s=e+(n-e)/2,i,r)-t)>0?n=s:e=s}while(Math.abs(o)>1e-7&&++a<10);return s}(e,i,i+Te,t,n)}return function(t){return 0===t?0:1===t?1:De(s(t),e,i)}},je=38,Ie=40,Re=32,He=9,Pe=33,Ue=34,Ne=36,qe=35,ze=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Rt(this,e),window.scrollTo(0,0),history.scrollRestoration="manual",(t=Vt(this,Bt(e).call(this,n))).inertia&&(t.lerp=.1*t.inertia),t.isScrolling=!1,t.isDraggingScrollbar=!1,t.isTicking=!1,t.hasScrollTicking=!1,t.parallaxElements=[],t.stop=!1,t.checkKey=t.checkKey.bind(Yt(t)),window.addEventListener("keydown",t.checkKey,!1),t}return zt(e,t),Pt(e,[{key:"init",value:function(){var t=this;this.html.classList.add(this.smoothClass),this.instance=qt({delta:{x:0,y:0}},this.instance),this.vs=new ge({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on((function(e){t.stop||(t.isTicking||t.isDraggingScrollbar||(requestAnimationFrame((function(){t.updateDelta(e),t.isScrolling||t.startScrolling()})),t.isTicking=!0),t.isTicking=!1)})),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.detectElements(),this.transformElements(!0,!0),this.checkScroll(!0),Gt(Bt(e.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){this.instance.limit=this.el.offsetHeight-this.windowHeight}},{key:"startScrolling",value:function(){this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(t){var e=this;if(this.stop)t.keyCode==He&&requestAnimationFrame((function(){e.html.scrollTop=0,document.body.scrollTop=0}));else{switch(t.keyCode){case He:requestAnimationFrame((function(){e.html.scrollTop=0,document.body.scrollTop=0,e.scrollTo(document.activeElement,-window.innerHeight/2)}));break;case je:this.instance.delta.y-=240;break;case Ie:this.instance.delta.y+=240;break;case Pe:this.instance.delta.y-=window.innerHeight;break;case Ue:this.instance.delta.y+=window.innerHeight;break;case Ne:this.instance.delta.y-=this.instance.limit;break;case qe:this.instance.delta.y+=this.instance.limit;break;case Re:document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||(t.shiftKey?this.instance.delta.y-=window.innerHeight:this.instance.delta.y+=window.innerHeight);break;default:return}this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}}},{key:"checkScroll",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(requestAnimationFrame((function(){return t.checkScroll()})),this.hasScrollTicking=!0),this.updateScroll();var i=Math.abs(this.instance.delta.y-this.instance.scroll.y);!this.animatingScroll&&(i<.5&&0!=this.instance.delta.y||i<.5&&0==this.instance.delta.y)&&this.stopScrolling();for(var r=this.sections.length-1;r>=0;r--)this.sections[r].persistent||this.instance.scroll.y>this.sections[r].offset&&this.instance.scroll.y<this.sections[r].limit?(this.transform(this.sections[r].el,0,-this.instance.scroll.y),this.sections[r].inView||(this.sections[r].inView=!0,this.sections[r].el.style.opacity=1,this.sections[r].el.style.pointerEvents="all",this.sections[r].el.setAttribute("data-".concat(this.name,"-section-inview"),""))):(this.sections[r].inView&&(this.sections[r].inView=!1,this.sections[r].el.style.opacity=0,this.sections[r].el.style.pointerEvents="none",this.sections[r].el.removeAttribute("data-".concat(this.name,"-section-inview"))),this.transform(this.sections[r].el,0,0));this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.detectElements(),this.transformElements();var o=this.instance.scroll.y/this.instance.limit*this.scrollBarLimit;this.transform(this.scrollbarThumb,0,o),Gt(Bt(e.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.update()}},{key:"updateDelta",value:function(t){this.instance.delta.y-=t.deltaY*this.multiplier,this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit)}},{key:"updateScroll",value:function(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll.y=Se(this.instance.scroll.y,this.instance.delta.y,this.lerp):this.instance.scroll.y>this.instance.limit?this.setScroll(this.instance.scroll.x,this.instance.limit):this.instance.scroll.y<0?this.setScroll(this.instance.scroll.x,0):this.setScroll(this.instance.scroll.x,this.instance.delta.y)}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){this.instance.delta.y!=this.instance.scroll.y?this.instance.speed=(this.instance.delta.y-this.instance.scroll.y)/Math.max(1,Date.now()-this.timestamp):this.instance.speed=0}},{key:"initScrollBar",value:function(){this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarHeight=this.scrollbar.getBoundingClientRect().height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"reinitScrollBar",value:function(){this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarHeight=this.scrollbar.getBoundingClientRect().height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(t){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(t){this.isDraggingScrollbar=!1,this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(t){var e=this;!this.isTicking&&this.isDraggingScrollbar&&(requestAnimationFrame((function(){var n=100*t.clientY/e.scrollbarHeight*e.instance.limit/100;n>0&&n<e.instance.limit&&(e.instance.delta.y=n)})),this.isTicking=!0),this.isTicking=!1}},{key:"addElements",value:function(){var t=this;this.els=[],this.parallaxElements=[],this.sections.forEach((function(e,n){t.sections[n].el.querySelectorAll("[data-".concat(t.name,"]")).forEach((function(e,i){var r,o,s=e.dataset[t.name+"Class"]||t.class,a=e.dataset[t.name+"Repeat"],l=e.dataset[t.name+"Call"],c=e.dataset[t.name+"Position"],u=e.dataset[t.name+"Delay"],h=e.dataset[t.name+"Direction"],p="string"==typeof e.dataset[t.name+"Sticky"],f=!!e.dataset[t.name+"Speed"]&&parseFloat(e.dataset[t.name+"Speed"])/10,d="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,m=e.dataset[t.name+"Target"];o=void 0!==m?document.querySelector("".concat(m)):e;var g=(r=t.sections[n].inView?o.getBoundingClientRect().top+t.instance.scroll.y-Ee(o).y:o.getBoundingClientRect().top-Ee(t.sections[n].el).y-Ee(o).y)+o.offsetHeight,v=(g-r)/2+r;if(p){var y=e.getBoundingClientRect().top,b=y-r;r+=window.innerHeight,v=((g=y+o.offsetHeight-e.offsetHeight-b)-r)/2+r}a="false"!=a&&(null!=a||t.repeat);var w=[0,0];if(d)for(var k=0;k<d.length;k++)"string"==typeof d[k]?d[k].includes("%")?w[k]=parseInt(d[k].replace("%","")*t.windowHeight/100):w[k]=parseInt(d[k]):w[k]=d[k];var x={el:e,id:i,class:s,top:r+w[0],middle:v,bottom:g-w[1],offset:d,repeat:a,inView:!!e.classList.contains(s),call:l,speed:f,delay:u,position:c,target:o,direction:h,sticky:p};t.els.push(x),(!1!==f||p)&&t.parallaxElements.push(x)}))}))}},{key:"addSections",value:function(){var t=this;this.sections=[];var e=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));0===e.length&&(e=[this.el]),e.forEach((function(e,n){var i=e.getBoundingClientRect().top-1.5*window.innerHeight-Ee(e).y,r=i+e.getBoundingClientRect().height+2*window.innerHeight,o={el:e,offset:i,limit:r,inView:!1,persistent:"string"==typeof e.dataset[t.name+"Persistent"]};t.sections[n]=o}))}},{key:"transform",value:function(t,e,n,i){var r;if(i){var o=Ee(t),s=Se(o.x,e,i),a=Se(o.y,n,i);r="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(s,",").concat(a,",0,1)")}else r="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(n,",0,1)");t.style.webkitTransform=r,t.style.msTransform=r,t.style.transform=r}},{key:"transformElements",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.scroll.y+this.windowHeight,r=this.instance.scroll.y+this.windowMiddle;this.parallaxElements.forEach((function(o,s){var a=!1;if(t&&(a=0),o.inView||n)switch(o.position){case"top":a=e.instance.scroll.y*-o.speed;break;case"elementTop":a=(i-o.top)*-o.speed;break;case"bottom":a=(e.instance.limit-i+e.windowHeight)*o.speed;break;default:a=(r-o.middle)*-o.speed}o.sticky&&(a=o.inView?e.instance.scroll.y-o.top+window.innerHeight:e.instance.scroll.y<o.top-window.innerHeight&&e.instance.scroll.y<o.top-window.innerHeight/2?0:e.instance.scroll.y>o.bottom&&e.instance.scroll.y>o.bottom+100&&o.bottom-o.top+window.innerHeight),!1!==a&&("horizontal"===o.direction?e.transform(o.el,a,0,!t&&o.delay):e.transform(o.el,0,a,!t&&o.delay))}))}},{key:"scrollTo",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.25,0,.35,1],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,l=e?parseInt(e):0;if(o=Ae.apply(void 0,Xt(o)),"string"==typeof t){if("top"===t)n=0;else if("bottom"===t)n=this.instance.limit;else if(!(n=document.querySelector(t)))return}else if("number"==typeof t)n=parseInt(t);else{if(!t||!t.tagName)return void console.warn("`targetOption` parameter is not valid");n=t}if("number"!=typeof n){var c=Ce(n).includes(this.el);if(!c)return;var u=n.getBoundingClientRect(),h=u.top,p=Ce(n),f=p.find((function(t){return i.sections.find((function(e){return e.el==t}))})),d=0;f&&(d=Ee(f).y),l=h+l-d}else l=n+l;var m=parseFloat(this.instance.delta.y),g=Math.max(0,Math.min(l,this.instance.limit)),v=g-m,y=function(t){s?i.setScroll(i.instance.delta.x,m+v*t):i.instance.delta.y=m+v*t};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var b=Date.now(),w=function t(){var e=(Date.now()-b)/r;e>1?(y(1),i.animatingScroll=!1,0==r&&i.update(),a&&a()):(i.scrollToRaf=requestAnimationFrame(t),y(o(e)))};w()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(t,e){this.instance=qt({},this.instance,{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function(){Gt(Bt(e.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),e}(Kt),Be=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rt(this,t),this.options=e,Object.assign(this,Jt,e),this.init()}return Pt(t,[{key:"init",value:function(){if(this.smoothMobile||(this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),!0!==this.smooth||this.isMobile?this.scroll=new ee(this.options):this.scroll=new ze(this.options),this.scroll.init(),window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length),e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(t,e,n,i,r,o){this.scroll.scrollTo(t,e,n,i,r,o)}},{key:"setScroll",value:function(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),t}(),We=function(){function t(){}return t.locomotive$=function(t){var e=this;return this.init_||(this.init_=!0,setTimeout((function(){var n=new Be({el:t,smooth:!1,getSpeed:!0,getDirection:!1,useKeyboard:!0,smoothMobile:!0,inertia:1,class:"is-inview",scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init"});e.instance$.next(n)}),200)),this.instance$},t}();We.instance$=new i.ReplaySubject(1),We.scroll$=We.instance$.pipe(n.switchMap((function(t){return i.fromEventPattern((function(e){t.on("scroll",e)}),(function(e){t.off("scroll",e)}))})));var Ye=Ct+"gallery-modal.html",Ve=function(){function t(){this.x=0,this.y=0,this.dy=0}return t.prototype.tick=function(t){if(t.x){var e=this.inertia?Number(this.inertia):.01;this.x+=(t.x-this.x)*e,this.y+=(t.y+this.dy-this.y)*e}},t}(),Ge=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this;r.items.push(this.gallery);this.lerp=new Ve;this.raf$=i.interval(0,i.animationFrame);var o=t.getContext(this).node.querySelector(".btn--gallery > span"),s={x:0,y:0};this.move$=i.fromEvent(window,"mousemove").pipe(n.map((function(t){return s.x=.25*-window.innerWidth+t.clientX,s.y=.25*-window.innerWidth+t.clientY,s}))),We.scroll$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.lerp.dy=t.scroll.y})),this.animation$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){gsap.set(o,{backgroundPosition:t.x+"px "+t.y+"px"})}))},o.animation$=function(){var t=this;return this.raf$.pipe(n.withLatestFrom(this.move$),n.map((function(e){var n=t.lerp;return n.tick(e[1]),n})),n.startWith(this.lerp))},o.onOpenGallery=function(t){var e=r.items,i=e.indexOf(this.gallery);At.open$({src:Ye,data:{items:e,index:i}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},r}(t.Component);Ge.items=[],Ge.meta={selector:"[gallery]",inputs:["gallery"]};var Xe=function(){function t(){}return t.height$=function(){var t=document.documentElement.style;return i.fromEvent(window,"resize").pipe(n.map((function(t){return window.innerHeight})),n.startWith(window.innerHeight),n.tap((function(e){var n=.01*e;t.setProperty("--vh",n+"px")})))},t}(),Je=function(e){function i(){return e.apply(this,arguments)||this}a(i,e);var r=i.prototype;return r.onInit=function(){this.mainActive=!1,Xe.height$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){console.log("HeaderComponent.height$",t)}))},r.onMainToggle=function(){this.mainActive=!this.mainActive;var e=t.getContext(this).node,n=Array.prototype.slice.call(e.querySelectorAll(".nav--primary-menu > li"));gsap.to(n,{opacity:this.mainActive?1:0,duration:.35,stagger:{each:.05,ease:Power3.easeOut}}),this.pushChanges(),this.toggle.next(this.mainActive)},r.onOpenSub=function(t){this.subId=t,this.pushChanges()},r.onCloseSub=function(t){this.subId===t&&(this.subId=null,this.pushChanges())},r.isSubOpen=function(t){return this.subId===t},r.isPrimaryHidden=function(){return null!=this.subId},i}(t.Component);Je.meta={selector:"header",outputs:["toggle"]};var Ke=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.transform=function(t){if(t){t=t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e))}));var e=['"',"&","'","<",">"," ","Â¡","Â¢","Â£","Â¤","Â¥","Â¦","Â§","Â¨","Â©","Âª","Â«","Â¬","Â­","Â®","Â¯","Â°","Â±","Â²","Â³","Â´","Âµ","Â¶","Â·","Â¸","Â¹","Âº","Â»","Â¼","Â½","Â¾","Â¿","Ã€","Ã","Ã‚","Ãƒ","Ã„","Ã…","Ã†","Ã‡","Ãˆ","Ã‰","ÃŠ","Ã‹","ÃŒ","Ã","ÃŽ","Ã","Ã","Ã‘","Ã’","Ã“","Ã”","Ã•","Ã–","Ã—","Ã˜","Ã™","Ãš","Ã›","Ãœ","Ã","Ãž","ÃŸ","Ã ","Ã¡","Ã£","Ã¤","Ã¥","Ã¦","Ã§","Ã¨","Ã©","Ãª","Ã«","Ã¬","Ã­","Ã®","Ã¯","Ã°","Ã±","Ã²","Ã³","Ã´","Ãµ","Ã¶","Ã·","Ã¸","Ã¹","Ãº","Ã»","Ã¼","Ã½","Ã¾","Ã¿","&","â€¢","Â°","âˆž","â€°","â‹…","Â±","â€ ","â€”","Â¬","Âµ","âŠ¥","âˆ¥","â‚¬","Â£","Â¥","Â¢","Â©","Â®","â„¢","Î±","Î²","Î³","Î´","Îµ","Î¶","Î·","Î¸","Î¹","Îº","Î»","Î¼","Î½","Î¾","Î¿","Ï€","Ï","Ïƒ","Ï„","Ï…","Ï†","Ï‡","Ïˆ","Ï‰","Î‘","Î’","Î“","Î”","Î•","Î–","Î—","Î˜","Î™","Îš","Î›","Îœ","Î","Îž","ÎŸ","Î ","Î¡","Î£","Î¤","Î¥","Î¦","Î§","Î¨","Î©"],n=new RegExp("(&"+["quot","amp","apos","lt","gt","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","AElig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","amp","bull","deg","infin","permil","sdot","plusmn","dagger","mdash","not","micro","perp","par","euro","pound","yen","cent","copy","reg","trade","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega"].join(";)|(&")+";)","g");return t=t.replace(n,(function(){for(var t=1;t<arguments.length;t++)if(arguments[t])return e[t-1]}))}},e}(t.Pipe);Ke.meta={name:"html"};var Ze=0,Qe=function(){function e(){}return e.worker=function(){return this.worker_||(this.worker_=new Worker(document.querySelector("base").getAttribute("href")+"js/workers/image.service.worker.js")),this.worker_},e.load$=function(t){if(!("Worker"in window)||this.isBlob(t)||this.isCors(t))return i.of(t);var e=++Ze,r=this.worker();return r.postMessage({src:t,id:e}),i.fromEvent(r,"message").pipe(n.filter((function(e){return e.data.src===t})),n.map((function(t){return URL.createObjectURL(t.data.blob)})),n.first(),n.finalize((function(t){r.postMessage({id:e}),t&&URL.revokeObjectURL(t)})))},e.getHost=function(e){var n=t.getLocationComponents(e);return""!==n.host?n.host:location.host},e.isCors=function(t){return this.getHost(t)!==location.host},e.isBlob=function(t){return 0===t.indexOf("blob:")},e}(),tn=function(){function t(){}return t.observer=function(){var t=this;return this.observer_||(this.readySubject_=new i.BehaviorSubject(!1),this.observerSubject_=new i.Subject,this.observer_=new IntersectionObserver((function(e){t.observerSubject_.next(e)}))),this.observer_},t.intersection$=function(t){if("IntersectionObserver"in window){var e=this.observer();return e.observe(t),this.observerSubject_.pipe(n.map((function(e){return e.find((function(e){return e.target===t}))})),n.filter((function(t){return void 0!==t})),n.finalize((function(){return e.unobserve(t)})))}return i.of({target:t,isIntersecting:!0})},t.firstIntersection$=function(t){return this.intersection$(t).pipe(n.filter((function(t){return t.isIntersecting})),n.first())},t}(),en=function(){function t(){}return t.get=function(t){return this.cache[t]},t.set=function(t,e){this.cache[t]=e;var n=Object.keys(this.cache);n.length>100&&this.remove(n[0])},t.remove=function(t){delete this.cache[t]},o(t,null,[{key:"cache",get:function(){return this.cache_||(this.cache_={}),this.cache_}}]),t}(),nn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this,r=t.getContext(this).node,o=r.querySelectorAll("img");if(o.length>1)throw"LazyPictureDirective.error only one img tag allowed";if(0===o.length)throw"LazyPictureDirective.error one img tag needed";o[0];this.src$=new i.ReplaySubject(1).pipe(n.distinctUntilChanged(),n.switchMap((function(t){var n=en.get(t);return n?i.of(n):(e.setAnimation(0),e.intersection$(t))})),n.takeUntil(this.unsubscribe$)),this.src$.subscribe((function(t){We.instance$.pipe(n.first(),n.delay(10)).subscribe((function(t){t.update(),e.animate()}))})),r.addEventListener("click",(function(){e.setAnimation(0),e.animate()}))},o.setAnimation=function(e){var n=t.getContext(this).node.querySelector(".lazy-picture__overlay"),i=1-e,r=100*e;gsap.set(n,{background:"linear-gradient(rgba(0,0,0,0) 0%, rgba(0,0,0,"+i+") "+r+"%)"})},o.animate=function(){var e=t.getContext(this).node.querySelector(".lazy-picture__overlay"),n={value:0};gsap.to(n,3,{value:1,delay:1,overwrite:!0,ease:Power4.easeOut,onUpdate:function(){var t=1-n.value,i=100*n.value;gsap.set(e,{background:"linear-gradient(rgba(0,0,0,0) 0%, rgba(0,0,0,"+t+") "+i+"%)"})},onCompleted:function(){gsap.set(e,{background:"none"})}})},o.onChanges=function(){this.src$.next(this.lazyPicture)},o.lazy$=function(e){var i=t.getContext(this).node;return tn.firstIntersection$(i).pipe(n.switchMap((function(){return Qe.load$(e)})),n.takeUntil(this.unsubscribe$))},o.intersection$=function(e){var i=this,r=t.getContext(this).node,o=r.querySelector("img");return Qe.load$(e).pipe(n.switchMap((function(t){return en.set(i.lazyPicture,t),o.setAttribute("src",t),tn.firstIntersection$(r)})),n.takeUntil(this.unsubscribe$))},r}(t.Directive);nn.meta={selector:"[lazyPicture],[[lazyPicture]]",inputs:["lazyPicture"]};var rn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this,r=t.getContext(this).node;r.classList.add("lazy"),this.src$=(new i.Subject).pipe(n.distinctUntilChanged(),n.switchMap((function(t){var n=en.get(t);return n?i.of(n):(r.classList.remove("lazyed"),e.lazy$(t))})),n.takeUntil(this.unsubscribe$)),this.src$.subscribe((function(t){en.set(e.lazy,t),r.setAttribute("src",t),r.classList.add("lazyed"),We.instance$.pipe(n.first(),n.delay(10)).subscribe((function(t){return t.update()}))}))},o.onChanges=function(){this.src$.next(this.lazy)},o.lazy$=function(e){var i=t.getContext(this).node;return tn.firstIntersection$(i).pipe(n.switchMap((function(){return Qe.load$(e)})),n.takeUntil(this.unsubscribe$))},r}(t.Directive);rn.meta={selector:"[lazy],[[lazy]]",inputs:["lazy"]};var on=function(e){function i(){return e.apply(this,arguments)||this}return a(i,e),i.prototype.onInit=function(){var e=this,i=t.getContext(this).node;We.locomotive$(i).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){return e.scroll=t}))},i}(t.Directive);on.meta={selector:"[locomotive]"};var sn=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.onInit=function(){var e=t.getContext(this).parentInstance;e instanceof jt&&(this.data=e.modal.data)},i.close=function(){At.reject()},n}(t.Component);sn.meta={selector:"[modal]"};var an="select",ln="or",cn=function(){function t(t){this.change$=new i.BehaviorSubject,this.mode=an,this.placeholder="Select",this.values=[],this.options=[],t&&(t.mode===an&&t.options.unshift({label:t.placeholder,values:[]}),Object.assign(this,t))}o(t,[{key:"empty",get:function(){return 0===this.values.length}}]);var e=t.prototype;return e.filter=function(t,e){return!0},e.match=function(t){var e,n=this;return this.mode===ln?(e=!this.values.length,this.values.forEach((function(i){e=e||n.filter(t,i)}))):(e=!0,this.values.forEach((function(i){e=e&&n.filter(t,i)}))),e},e.getSelectedOption=function(){var t=this;return this.options.find((function(e){return t.has(e)}))},e.getLabel=function(){if(this.mode===an){var t=this.getSelectedOption();return t?t.label:this.placeholder}return this.label},e.hasAny=function(){return this.values.length>0},e.has=function(t){return-1!==this.values.indexOf(t.value)},e.set=function(t){this.mode===an&&(this.values=[]),-1===this.values.indexOf(t.value)&&void 0!==t.value&&this.values.push(t.value),this.mode===an&&(this.placeholder=t.label),this.change$.next()},e.remove=function(t){var e=this.values.indexOf(t.value);if(-1!==e&&this.values.splice(e,1),this.mode===an){var n=this.options[0];this.placeholder=n.label}this.change$.next()},e.toggle=function(t){this.has(t)?this.remove(t):this.set(t)},e.toggleActive=function(){this.active=!this.active},e.clear=function(){if(this.values=[],this.mode===an){var t=this.options[0];this.placeholder=t.label}this.change$.next()},t}(),un=function(){function t(){}return t.get=function(t){return new URLSearchParams(window.location.search).get(t)},t.set=function(t,e){var n=new URLSearchParams(window.location.search);"string"==typeof t?n.set(t,e):n.set(t,""),this.replace(n)},t.replace=function(t){if(window.history&&window.history.pushState){var e=document.title,n=window.location.href.split("?")[0]+"?"+t.toString();window.history.pushState(t.toString(),e,n)}},t.deserialize=function(t){var e=this.get("params");return this.decode(t,e)},t.serialize=function(t,e){var n=this.deserialize(),i=this.encode(t,e,n);this.set("params",i)},t.decode=function(t,e){var n=null;if(e){var i=window.atob(e);n=JSON.parse(i)}return t&&n&&(n=n[t]),n||null},t.encode=function(t,e,n){n=n||{};"string"==typeof t?n[t]=e:n=t;var i=JSON.stringify(n);return window.btoa(i)},t}(),hn=function(){function t(t,e,n){var i={};this.filters=i,t&&(Object.keys(t).forEach((function(e){var r=new cn(t[e]);"function"==typeof n&&n(e,r),i[e]=r})),this.deserialize(this.filters,e))}var e=t.prototype;return e.getParamsCount=function(t){return t?Object.keys(t).reduce((function(e,n,i){var r=t[n];return e+(r?r.length:0)}),0):0},e.deserialize=function(t,e){var n;e&&this.getParamsCount(e)&&(n=e);var i=un.deserialize("filters");return i&&this.getParamsCount(i)&&(n=i),n&&Object.keys(t).forEach((function(e){t[e].values=n[e]||[]})),t},e.serialize=function(t){var e={},n=!1;return Object.keys(t).forEach((function(i){var r=t[i];r.values&&r.values.length>0&&(e[i]=r.values,n=!0)})),n||(e=null),un.serialize("filters",e),e},e.items$=function(t){var e=this,r=this.filters,o=Object.keys(r).map((function(t){return r[t].change$}));return this.updateFilterStates(r,t,!0),i.merge.apply(void 0,o).pipe(n.auditTime(1),n.tap((function(){return e.serialize(r)})),n.map((function(){return e.filterItems(t)})),n.tap((function(){return e.updateFilterStates(r,t)})))},e.filterItems=function(t,e){var n=this,i=Object.keys(this.filters).map((function(t){return n.filters[t]})).filter((function(t){return t.values&&t.values.length>0}));return t=t.filter((function(t){var n=!0;return i.forEach((function(i){i!==e&&(n=n&&i.match(t))})),n}))},e.updateFilterStates=function(t,e,n){var i=this;Object.keys(t).forEach((function(r){var o=t[r],s=n?e:i.filterItems(e,o);o.options.forEach((function(t){var e=0;if(t.value)for(var i=0;i<s.length;){var r=s[i];o.filter(r,t.value)&&e++,i++}else e=s.length;n?t.initialCount=e:t.count=e,t.disabled=0===e})),n&&o.options.sort((function(t,e){return e.initialCount-t.initialCount}))}))},t}(),pn=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.prototype.onInit=function(){},e}(t.Component);pn.meta={selector:"[page]"};var fn=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.clear=function(){var t=this;this.toRawArray().forEach((function(e){t.setter(e.name,"",-1)}))},e.delete=function(t){this.setter(t,"",-1)},e.exist=function(t){return-1!==document.cookie.indexOf(";"+t+"=")||0===document.cookie.indexOf(t+"=")},e.get=function(t){return this.decode(this.getRaw(t))},e.set=function(t,e,n){this.setter(t,this.encode(e),n)},e.getRaw=function(t){var e=null,n=this.toRawArray().find((function(e){return e.name===t}));return n&&(e=n.value),e},e.setRaw=function(t,e,n){this.setter(t,e,n)},e.toArray=function(){var t=this;return this.toRawArray().map((function(e){return e.value=t.decode(e.value),e}))},e.toRawArray=function(){return document.cookie.split(";").map((function(t){var e=t.split("=");return{name:e[0].trim(),value:e[1]?e[1].trim():null}})).filter((function(t){return""!==t.name}))},e.setter=function(t,e,n){var i;if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toUTCString()}else i="";document.cookie=t+"="+e+i+"; path=/",this.items$.next(this.toArray())},e.isSupported=function(){return"undefined"!=typeof window&&void 0!==window.document},e}(g);s(fn,"items$",new i.ReplaySubject(1));var dn=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.get$=function(e,n,i){return t.get$.call(this,Lt(e),n,i)},e.delete$=function(e){return t.delete$.call(this,Lt(e))},e.post$=function(e,n){return t.post$.call(this,Lt(e),n)},e.put$=function(e,n){return t.put$.call(this,Lt(e),n)},e.patch$=function(e,n){return t.patch$.call(this,Lt(e),n)},e.staticGet$=function(e,n,i){return t.get$.call(this,Lt(e,!0),n,i)},e.staticDelete$=function(e){return t.delete$.call(this,Lt(e,!0))},e.staticPost$=function(e,n){return t.post$.call(this,Lt(e,!0),n)},e.staticPut$=function(e,n){return t.put$.call(this,Lt(e,!0),n)},e.staticPatch$=function(e,n){return t.patch$.call(this,Lt(e,!0),n)},e}(S);s(dn,"currentLanguage",fn.getRaw("wp-wpml_current_language"));var mn=function(){function t(){}return t.all$=function(){return Tt?dn.get$("/news/all").pipe(n.map((function(t){return t.data}))):dn.get$("/posts?lang="+dn.currentLanguage).pipe(n.map((function(t){return t.data})))},t.filters$=function(){return Tt?dn.get$("/news/filters").pipe(n.map((function(t){return t.data}))):dn.get$("/categories?lang="+dn.currentLanguage).pipe(n.map((function(t){return t.data})))},t}(),gn=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var r=e.prototype;return r.onInit=function(){var t=this;this.items=[],this.filters={},this.filter={},this.load$().pipe(n.first()).subscribe((function(e){t.items=e[0],t.filters=e[1],t.onLoad(),t.pushChanges()}))},r.load$=function(){return i.combineLatest([mn.all$(),mn.filters$()])},r.onLoad=function(){var t=this,e=this.items,i=this.filters;Object.keys(i).forEach((function(t){i[t].mode=ln}));var r=new hn(i,{},(function(t,e){e.filter=function(e,n){switch(t){case"category":return e.category.id===n}}}));this.filterService=r,this.filters=r.filters,this.filter=this.filters.category,r.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()}))},r.toggleFilter=function(t){var e=this;Object.keys(this.filters).forEach((function(n){var i=e.filters[n];i.active=i===t&&!i.active})),this.pushChanges()},r.clearFilter=function(t,e){t.preventDefault(),t.stopImmediatePropagation(),e.clear(),this.pushChanges()},r.makeFake__=function(){mn.all$().pipe(n.first()).subscribe((function(t){var e={},n=function(t,n){var i=e[t]?e[t]:e[t]={label:t,placeholder:"Scegli "+t,mode:"or",options:[]};(n=Array.isArray(n)?n:[n]).forEach((function(t){i.options.find((function(e){return e.value===t}))||i.options.push({label:t,value:t})}))},i=t.data;i.forEach((function(t,e){for(var i in["lumen","watt","material","mounting","area"].forEach((function(e){-1!==t[e].indexOf("/")?t[e]=t[e].split("/").map((function(t){return t.trim()})):t[e]=t[e].split(",").map((function(t){return t.trim()}))})),t)-1===["catalogue","category","menu"].indexOf(i)&&"string"==typeof t[i]&&-1!==t[i].indexOf("/")&&console.log(i,t[i]),-1===["id","name","catalogue","category","menu"].indexOf(i)&&n(i,t[i]);t.id=1e3+e+1,t.url="/cantalupi/exclusive-yachts-interiors-top-series.html",t.image="/cantalupi/img/exclusive-yachts-exteriors/0"+(1+t.id%4)+".jpg",t.imageOver="/cantalupi/img/exclusive-yachts-exteriors/01-over.jpg",t.category="Exclusive Yachts Exteriors",t.title=t.name,t.description=t.plus,t.power=t.watt+" W",t.lumen=t.lumen+" lumen"})),console.log("filters",e,JSON.stringify(e,null,2));var r=i.filter((function(t){return t.yachts&&-1!==t.category.indexOf("Exteriors")})),o=i.filter((function(t){return t.yachts&&-1!==t.category.indexOf("Interiors")})),s=i.filter((function(t){return t.villas&&-1!==t.category.indexOf("Exteriors")})),a=i.filter((function(t){return t.villas&&-1!==t.category.indexOf("Interiors")}));console.log("yachtsExteriors",r,JSON.stringify(r,null,2)),console.log("yachtsInteriors",o,JSON.stringify(o,null,2)),console.log("villasExteriors",s,JSON.stringify(s,null,2)),console.log("villasInteriors",a,JSON.stringify(a,null,2))}))},e}(pn);gn.meta={selector:"[news-page]"};var vn=function(){function t(){this.x=this.ex=window.innerWidth/2,this.y=this.ey=window.innerHeight/2,this.dy=0}return t.prototype.tick=function(t){if(t.clientX){var e=this.inertia?Number(this.inertia):.01;this.ex=t.clientX,this.ey=t.clientY,this.x+=(this.ex-this.x)*e,this.y+=(this.ey+0-this.y)*e}},t}(),yn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this;this.raf$=i.interval(0,i.animationFrame),this.move$=i.fromEvent(document,"mousemove"),this.lerp=new vn;var r=t.getContext(this).node;this.animation$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){r.style.transform="translate3d("+t.x+"px,"+t.y+"px,0px)"})),We.scroll$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.lerp.dy=t.scroll.y}))},o.animation$=function(){var t=this;return this.raf$.pipe(n.withLatestFrom(this.move$),n.map((function(e){var n=t.lerp;return n.tick(e[1]),n})),n.startWith(this.lerp))},r}(t.Directive);yn.meta={selector:"[overlay-effect]",inputs:["inertia"]},yn.rafWindow=i.of(i.animationFrame);var bn=function(){function t(){this.w=window.innerWidth,this.h=window.innerHeight,this.x=this.ex=this.w/2,this.y=this.ey=this.h/2,this.speed=this.espeed=0,this.opacity=1,this.dy=0,this.isOver=!0}var e=t.prototype;return e.tick=function(t){if(t.clientX){var e=this.inertia?Number(this.inertia):.01;this.ex=t.clientX,this.ey=t.clientY,this.x+=(this.ex-this.x)*e,this.y+=(this.ey+0-this.y)*e,this.speed+=.01*(this.espeed-this.speed),this.opacity+=.01*((this.isOver?1:0)-this.opacity)}},e.setSpeed=function(t){this.espeed=Math.abs(t/50)},t}(),wn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this;this.lerp=new bn;this.raf$=i.interval(0,i.animationFrame),this.move$=i.fromEvent(document,"mousemove");var r=t.getContext(this).node,o=document.createElement("canvas");r.appendChild(o);var s=new window.glsl.Canvas(o,{fragmentString:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\nuniform float u_mx;\nuniform float u_my;\nuniform float u_speed;\nuniform float u_opacity;\n\nfloat random(vec2 st) {\n\treturn fract(sin(dot(st.xy + cos(u_time), vec2(12.9898 , 78.233))) * (43758.5453123));\n}\n\nvec2 coord(in vec2 p) {\n\tp = p / u_resolution.xy;\n    if (u_resolution.x > u_resolution.y) {\n        p.x *= u_resolution.x / u_resolution.y;\n        p.x += (u_resolution.y - u_resolution.x) / u_resolution.y / 2.0;\n    } else {\n        p.y *= u_resolution.y / u_resolution.x;\n\t    p.y += (u_resolution.x - u_resolution.y) / u_resolution.x / 2.0;\n    }\n    p -= 0.5;\n    p *= vec2(-1.0, 1.0);\n\treturn p;\n}\n#define uv gl_FragCoord.xy / u_resolution.xy\n#define st coord(gl_FragCoord.xy)\n#define mx coord(vec2(u_mx, u_my))\n#define ee noise(gl_FragCoord.xy / u_resolution.xy)\n#define rx 1.0 / min(u_resolution.x, u_resolution.y)\n\nfloat sCircle(in vec2 p, in float w) {\n    return length(p) * 2.0 - w;\n}\n\nfloat sGradient(in vec2 p) {\n    return length(p);\n}\n\nvoid main() {\n\tvec2 p = st - vec2(mx.x, mx.y * -1.0);\n\tvec3 color = vec3(1.0);\n\t// float noise = random(p) * 0.1;\n\t// color = vec3(clamp(0.0, 1.0, color.r - noise));\n\t// float circle = sCircle(p, 0.2 - 0.2 * u_speed + cos(u_time) * 0.1);\n\t// circle += sCircle(p, 0.05 - 0.05 * u_speed + cos(u_time) * 0.025);\n\tfloat circle = sCircle(p, 0.2 + cos(u_time) * 0.1);\n\tcircle += sCircle(p, 0.05 + cos(u_time) * 0.025);\n\tcircle = clamp(0.0, 1.0, circle);\n\t// float alpha = smoothstep(0.0, 0.99, 1.0 - circle) * (0.4 + cos(u_time) * 0.35);\n\tfloat alpha = smoothstep(0.0, 0.8, 1.0 - circle) * 0.6 * u_opacity;\n\tgl_FragColor = vec4(color, alpha);\n}\n",premultipliedAlpha:!1}),a=document.createElement("canvas");r.appendChild(a);var l=new window.glsl.Canvas(a,{fragmentString:"\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\nuniform float u_mx;\nuniform float u_my;\nuniform float u_speed;\nuniform float u_opacity;\n\nfloat random(vec2 st) {\n\treturn fract(sin(dot(st.xy + cos(u_time), vec2(12.9898 , 78.233))) * (43758.5453123));\n}\n\nvec2 coord(in vec2 p) {\n\tp = p / u_resolution.xy;\n    if (u_resolution.x > u_resolution.y) {\n        p.x *= u_resolution.x / u_resolution.y;\n        p.x += (u_resolution.y - u_resolution.x) / u_resolution.y / 2.0;\n    } else {\n        p.y *= u_resolution.y / u_resolution.x;\n\t    p.y += (u_resolution.x - u_resolution.y) / u_resolution.x / 2.0;\n    }\n    p -= 0.5;\n    p *= vec2(-1.0, 1.0);\n\treturn p;\n}\n#define uv gl_FragCoord.xy / u_resolution.xy\n#define st coord(gl_FragCoord.xy)\n#define mx coord(vec2(u_mx, u_my))\n#define ee noise(gl_FragCoord.xy / u_resolution.xy)\n#define rx 1.0 / min(u_resolution.x, u_resolution.y)\n\nfloat sCircle(in vec2 p, in float w) {\n    return length(p) * 2.0 - w;\n}\n\nfloat sGradient(in vec2 p) {\n    return length(p);\n}\n\nvoid main() {\n\tvec2 p = st - vec2(mx.x, mx.y * -1.0);\n\tvec3 color = vec3(0.0);\n\tfloat noise = random(p) * 0.1;\n\tcolor = vec3(clamp(0.0, 1.0, color.r + noise));\n\t// float circle = sCircle(p, 4.0 - 2.5 * u_speed + cos(u_time) * 0.05);\n\t// float circle = sGradient(p * (0.25 + 1.75 * u_speed));\n\tfloat circle = sGradient(p * 0.25);\n\tfloat alpha = clamp(0.0, 1.0, circle * 0.5) * u_opacity; // smoothstep(0.0, 0.99, circle) * 0.7;\n\tgl_FragColor = vec4(color, alpha);\n}\n",premultipliedAlpha:!1});this.animation$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){s.setUniforms({u_mx:t.x,u_my:t.y,u_speed:t.speed,u_opacity:t.opacity}),l.setUniforms({u_mx:t.x,u_my:t.y,u_speed:t.speed,u_opacity:t.opacity})})),We.scroll$.pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){e.lerp.setSpeed(t.speed),e.lerp.dy=t.scroll.y}))},o.animation$=function(){var t=this;return this.raf$.pipe(n.withLatestFrom(this.move$),n.map((function(e){var n=t.lerp;return n.tick(e[1]),n})),n.startWith(this.lerp))},r}(t.Directive);wn.meta={selector:"[overlay-webgl]"},wn.rafWindow=i.of(i.animationFrame);var kn=function(){function t(){}return t.all$=function(){if(Tt)return dn.get$("/products/yachts-exteriors").pipe(n.map((function(t){return t.data})));var t=location.pathname.split("/"),e=t[t.length-2];return dn.get$("/collections/"+e+"?lang="+dn.currentLanguage).pipe(n.map((function(t){return t.data})))},t.filters$=function(){return Tt?dn.get$("/products/filters").pipe(n.map((function(t){return t.data}))):dn.get$("/filters?lang="+dn.currentLanguage).pipe(n.map((function(t){return t.data})))},t}(),xn=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var r=e.prototype;return r.onInit=function(){var t=this;this.items=[],this.filters={},this.primaryFilters={},this.secondaryFilters={},this.moreFilters=!1,this.load$().pipe(n.first()).subscribe((function(e){t.items=e[0],t.filters=e[1],t.onLoad(),t.pushChanges()}))},r.load$=function(){return i.combineLatest([kn.all$(),kn.filters$()])},r.onLoad=function(){var t=this,e=this.items,i=this.filters;Object.keys(i).forEach((function(t){i[t].mode=an}));var r=new hn(i,{},(function(t,e){e.filter=function(e,n){return Array.isArray(e[t])?-1!==e[t].indexOf(n):e[t]===n}}));this.filterService=r,this.filters=r.filters,Object.keys(this.filters).forEach((function(e){t.filters[e].secondary?t.secondaryFilters[e]=t.filters[e]:t.primaryFilters[e]=t.filters[e]})),r.items$(e).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()}))},r.toggleFilter=function(t){var e=this;Object.keys(this.filters).forEach((function(n){var i=e.filters[n];i.active=i===t&&!i.active})),this.pushChanges()},r.clearFilter=function(t,e){t.preventDefault(),t.stopImmediatePropagation(),e.clear(),this.pushChanges()},r.onMoreFilters=function(t){this.moreFilters=!this.moreFilters,this.pushChanges()},r.makeFake=function(){dn.get$("/products/all").pipe(n.first()).subscribe((function(t){var e={},n=function(t,n){var i=e[t]?e[t]:e[t]={label:t,placeholder:"Scegli "+t,mode:"or",options:[]};(n=Array.isArray(n)?n:[n]).forEach((function(t){i.options.find((function(e){return e.value===t}))||i.options.push({label:t,value:t})}))},i=t.data;i.forEach((function(t,e){for(var i in["lumen","watt","material","mounting","area"].forEach((function(e){-1!==t[e].indexOf("/")?t[e]=t[e].split("/").map((function(t){return t.trim()})):t[e]=t[e].split(",").map((function(t){return t.trim()}))})),t)-1===["catalogue","category","menu"].indexOf(i)&&"string"==typeof t[i]&&-1!==t[i].indexOf("/")&&console.log(i,t[i]),-1===["id","name","catalogue","category","menu"].indexOf(i)&&n(i,t[i]);t.id=1e3+e+1,t.url="/cantalupi/exclusive-yachts-interiors-top-series.html",t.image="/cantalupi/img/exclusive-yachts-exteriors/0"+(1+t.id%4)+".jpg",t.imageOver="/cantalupi/img/exclusive-yachts-exteriors/01-over.jpg",t.category="Exclusive Yachts Exteriors",t.title=t.name,t.description=t.plus,t.power=t.watt+" W",t.lumen=t.lumen+" lumen"})),console.log("filters",e,JSON.stringify(e,null,2));var r=i.filter((function(t){return t.yachts&&-1!==t.category.indexOf("Exteriors")})),o=i.filter((function(t){return t.yachts&&-1!==t.category.indexOf("Interiors")})),s=i.filter((function(t){return t.villas&&-1!==t.category.indexOf("Exteriors")})),a=i.filter((function(t){return t.villas&&-1!==t.category.indexOf("Interiors")}));console.log("yachtsExteriors",r,JSON.stringify(r,null,2)),console.log("yachtsInteriors",o,JSON.stringify(o,null,2)),console.log("villasExteriors",s,JSON.stringify(s,null,2)),console.log("villasInteriors",a,JSON.stringify(a,null,2))}))},e}(pn);xn.meta={selector:"[products-page]"};var Sn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){this.initialFocus=!1;var e=t.getContext(this),i=e.module,r=e.node,o=this.expression=r.getAttribute("(scrollTo)");this.outputFunction=i.makeFunction(o,["$event"]),this.scrollTo$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){}))},o.scrollTo$=function(){var e=this,r=t.getContext(this),o=r.module,s=r.node,a=r.parentInstance;return i.fromEvent(s,"click").pipe(n.tap((function(t){var n=o.resolve(e.outputFunction,a,t);if("string"==typeof n){var i=document.querySelector(n);if(i){var r=e.currentTop(),s=r+i.getBoundingClientRect().top-50,l={pow:0},c=document.querySelector("html");gsap.set(c,{"scroll-behavior":"auto"}),gsap.to(l,Math.abs(s-r)/2e3,{pow:1,ease:Quad.easeOut,overwrite:"all",onUpdate:function(){window.scrollTo(0,r+(s-r)*l.pow)},onComplete:function(){gsap.set(c,{"scroll-behavior":"smooth"})}})}}})),n.shareReplay(1))},o.currentTop=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0},r}(t.Directive);Sn.meta={selector:"[(scrollTo)]"};var En=function(){function t(){}return t.download=function(t,e){void 0===e&&(e="download.txt");var n=window.URL.createObjectURL(t),i=this.a;i.href=n,i.download=e,i.click(),window.URL.revokeObjectURL(n)},o(t,null,[{key:"a",get:function(){var t=this.a_;return t||((t=document.createElement("a")).style="display: none",document.body.appendChild(t),this.a_=t),t}}]),t}(),Cn=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.clear=function(){this.isSupported()&&(localStorage.clear(),this.items$.next(this.toArray()))},e.delete=function(t){this.isSupported()&&(localStorage.removeItem(t),this.items$.next(this.toArray()))},e.exist=function(t){return!!this.isSupported()&&void 0!==localStorage.getItem(t)},e.get=function(t){return this.decode(this.getRaw(t))},e.set=function(t,e){this.setRaw(t,this.encode(e))},e.getRaw=function(t){var e=null;return this.isSupported()&&(e=localStorage.getItem(t)),e},e.setRaw=function(t,e){e&&this.isSupported()&&(localStorage.setItem(t,e),this.items$.next(this.toArray()))},e.toArray=function(){var t=this;return this.toRawArray().map((function(e){return e.value=t.decode(e.value),e}))},e.toRawArray=function(){var t=this;return this.isSupported()?Object.keys(localStorage).map((function(e){return{name:e,value:t.getRaw(e)}})):[]},e.isSupported=function(){return!!this.supported||g.isSupported("localStorage")},e}(g);s(Cn,"items$",new i.ReplaySubject(1));var Tn=function(){function t(t){t&&Object.assign(this,t)}return o(t,[{key:"avatar",get:function(){return(this.firstName||"?").substr(0,1).toUpperCase()+(this.lastName||"?").substr(0,1).toUpperCase()}},{key:"fullName",get:function(){return this.firstName+" "+this.lastName}}]),t}(),_n=function(){function t(){}return t.getCurrentUser=function(){return this.user$_.getValue()},t.setUser=function(t){this.user$_.next(t)},t.me$=function(){var t=this;return dn.get$("/user/me").pipe(n.map((function(e){return t.mapUser(e.data,e.static)})),n.catchError((function(t){return i.of(null)})),n.switchMap((function(e){return t.setUser(e),t.user$_})))},t.register$=function(t){var e=this;return dn.staticPost$("/user/register",t).pipe(n.map((function(t){return e.mapStatic__(t.data,t.static,"register")})))},t.login$=function(t){var e=this;return dn.staticPost$("/user/login",t).pipe(n.map((function(t){return e.mapStatic__(t.data,t.static,"login")})))},t.logout$=function(){var t=this;return dn.staticPost$("/user/logout").pipe(n.map((function(e){return t.mapStatic__(e.data,e.static,"logout")})))},t.retrieve$=function(t){var e=this;return dn.staticPost$("/user/retrievepassword",t).pipe(n.map((function(t){return e.mapStatic__(t.data,t.static,"retrieve")})))},t.update$=function(t){var e=this;return dn.staticPost$("/user/updateprofile",t).pipe(n.map((function(t){return e.mapStatic__(t.data,t.static,"register")})))},t.mapStatic__=function(t,e,n){if(void 0===n&&(n="me"),!e)return t;switch(n){case"me":Cn.exist("user")||(t=null);break;case"register":case"login":Cn.set("user",t);break;case"logout":Cn.delete("user")}return t},t.fake=function(t){return t.firstName=t.firstName||"Jhon",t.lastName=t.lastName||"Appleseed",t},t.mapUser=function(e,n){return n?t.fake(new Tn(e)):new Tn(e)},t.mapUsers=function(e,n){return e?e.map((function(e){return t.mapUser(e,n)})):[]},t}();_n.user$_=new i.BehaviorSubject(null);var On=Tt?"/tiemme-com/club-modal.html":"/Viewdoc.cshtml?co_id=23649",Ln=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=this,r=t.getContext(this).node;this.href=r.getAttribute("href"),i.fromEvent(r,"click").pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t.preventDefault(),e.tryDownloadHref()}))},o.onChanges=function(){var e=t.getContext(this).node;this.href=e.getAttribute("href")},o.tryDownloadHref=function(){var t=this;dn.staticGet$(this.href,void 0,"blob").pipe(n.first(),n.map((function(t){return t.data}))).subscribe((function(e){En.download(e,t.href.split("/").pop())}),(function(e){console.log(e),t.onLogin(event)}))},o.onLogin=function(t){var e=this;At.open$({src:On,data:{view:1}}).pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){t instanceof Mt&&(_n.setUser(t.data),e.tryDownloadHref())}))},r}(t.Directive);Ln.meta={selector:"[secure]"};var $n=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.onInit=function(){console.log("ShareComponent.onInit",this.share,this.title)},n.onChanges=function(){console.log("ShareComponent.onChanges",this.share,this.title)},n.getTitle=function(){var t=this.title?this.title:document.title;return this.encodeURI(t)},n.getUrl=function(){var t=this.share;return t?-1===t.indexOf(window.location.origin)&&(t=window.location.origin+(0===t.indexOf("/")?t:"/"+t)):t=window.location.href,this.encodeURI(t)},n.encodeURI=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)}))},o(e,[{key:"facebookUrl",get:function(){return"https://www.facebook.com/sharer/sharer.php?u="+this.getUrl()}},{key:"pinterestUrl",get:function(){return"https://www.pinterest.com/pin/create/button/?url="+this.getUrl()+"&media=&description="+this.getTitle()}},{key:"linkedInUrl",get:function(){return"https://www.linkedin.com/shareArticle?mini=true&url="+this.getUrl()+"&title="+this.getTitle()}},{key:"twitterUrl",get:function(){return"https://twitter.com/intent/tweet?text="+this.getTitle()+"%20"+this.getUrl()}},{key:"whatsappUrl",get:function(){return"https://api.whatsapp.com/send?text="+this.getUrl()}},{key:"mailToUrl",get:function(){return"mailto:?subject="+this.getTitle()+"&body="+this.getUrl()}}]),e}(t.Component);$n.meta={selector:"[share]",inputs:["share","title"],template:'\n\t<ul class="nav--share">\n\t\t<li>\n\t\t\t<a [href]="facebookUrl" target="_blank"><svg class="facebook"><use xlink:href="#facebook"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="twitterUrl" target="_blank"><svg class="twitter"><use xlink:href="#twitter"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="pinterestUrl" target="_blank"><svg class="pinterest"><use xlink:href="#pinterest"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="linkedInUrl" target="_blank"><svg class="linkedin"><use xlink:href="#linkedin"></use></svg></a>\n\t\t</li>\n\t\t\x3c!--\n\t\t<li>\n\t\t\t<a [href]="whatsappUrl" target="_blank"><svg class="whatsapp"><use xlink:href="#whatsapp"></use></svg></a>\n\t\t</li>\n\t\t<li>\n\t\t\t<a [href]="mailToUrl"><svg class="email"><use xlink:href="#email"></use></svg></a>\n\t\t</li>\n\t\t--\x3e\n\t</ul>\n\t'};var Dn=function(){this.x=0,this.y=0},Mn=function(t){t&&Object.assign(this,t)},Fn=function(t){function e(e){var n;return(n=t.call(this,e)||this).distance=new Dn,n.strength=new Dn,n.speed=new Dn,n}return a(e,t),e}(Mn),An=function(t){function e(e){var n;return(n=t.call(this,e)||this).distance=new Dn,n.strength=new Dn,n.speed=new Dn,n}return a(e,t),e}(Mn),jn=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e}(Mn),In=function(){function t(){}return t.getPosition=function(t,e){return t instanceof MouseEvent?e?(e.x=t.clientX,e.y=t.clientY):e={x:t.clientX,y:t.clientY}:t instanceof TouchEvent&&t.touches.length>0&&(e?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):e={x:t.touches[0].pageX,y:t.touches[0].pageY}),e},t.down$=function(t,e){var r,o=this;return i.merge(i.fromEvent(t,"mousedown"),i.fromEvent(t,"touchstart")).pipe(n.map((function(n){if((r=r||new Fn).node=t,r.target=n.target,r.originalEvent=n,r.down=o.getPosition(n,r.down),r.down)return r.distance=new Dn,r.strength=new Dn,r.speed=new Dn,e.next(r),r})),n.filter((function(t){return void 0!==t})))},t.move$=function(t,e,r,o){var s,a=this;return i.fromEvent(document,o.originalEvent instanceof MouseEvent?"mousemove":"touchmove").pipe(n.startWith(o),n.map((function(n){if((s=s||new An).node=t,s.target=n.target,s.originalEvent=n,s.position=a.getPosition(n,s.position),void 0!==o.down&&void 0!==s.position)return s.distance.x=s.position.x-o.down.x,s.distance.y=s.position.y-o.down.y,s.strength.x=s.distance.x/window.innerWidth*2,s.strength.y=s.distance.y/window.innerHeight*2,s.speed.x=o.speed.x+.1*(s.strength.x-o.strength.x),s.speed.y=o.speed.y+.1*(s.strength.y-o.strength.y),o.distance.x=s.distance.x,o.distance.y=s.distance.y,o.speed.x=s.speed.x,o.speed.y=s.speed.y,o.strength.x=s.strength.x,o.strength.y=s.strength.y,e.next(s),s})))},t.up$=function(t,e,r,o){var s;return i.fromEvent(document,o.originalEvent instanceof MouseEvent?"mouseup":"touchend").pipe(n.map((function(t){return s=s||new jn,e.next(s),r.next(),Math.abs(o.distance.x)>10&&(t.preventDefault(),t.stopImmediatePropagation()),s})))},t.events$=function(t){var e=this;t=t||document;var r=new i.ReplaySubject(1),o=new i.Subject;return this.down$(t,r).pipe(n.switchMap((function(s){return i.merge(e.move$(t,r,o,s),e.up$(t,r,o,s)).pipe(n.takeUntil(o))})),n.switchMap((function(){return r})))},t}(),Rn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var s=r.prototype;return s.onInit=function(){var e=this,r=t.getContext(this).node;if(this.container=r,this.wrapper=r.querySelector(".slider__wrapper"),0===this.items.length){var o=Array.prototype.slice.call(r.querySelectorAll(".slider__slide"));this.items=o}this.userGesture$=new i.Subject,setTimeout((function(){e.slider$().pipe(n.takeUntil(e.unsubscribe$)).subscribe((function(t){}))}),1),this.autoplay$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(){e.pushChanges()}))},s.slider$=function(){var t,e,i,r=this;return In.events$(this.wrapper).pipe(n.tap((function(n){n instanceof Fn?(t=r.getTranslation(r.wrapper,r.container),e=n):n instanceof An?i=r.onDragMoveEvent(e,n,t):n instanceof jn&&i&&(r.container.classList.remove("dragging"),r.wrapper.style.transform=null,r.onDragUpEvent(e,i))})))},s.autoplay$=function(){var t=this;if(this.autoplay){var e="number"==typeof this.autoplay?this.autoplay:4e3;return i.interval(e).pipe(n.takeUntil(this.userGesture$),n.tap((function(){t.current=(t.current+1)%t.items.length})))}return i.of(null)},s.onDragMoveEvent=function(t,e,n){this.container.classList.add("dragging");var i=n.x+e.distance.x;return this.wrapper.style.transform="translate3d("+i+"px, 0px, 0px)",e},s.onDragUpEvent=function(t,e){var n=this.container.offsetWidth;-1*e.distance.x>.25*n&&this.hasNext()?this.navTo(this.current+1):-1*e.distance.x<-.25*n&&this.hasPrev()?this.navTo(this.current-1):this.wrapper.style.transform="translate3d("+-100*this.current+"%, 0, 0)"},s.navTo=function(t){this.current=t,this.userGesture$.next(),this.pushChanges()},s.hasPrev=function(){return this.current-1>=0},s.hasNext=function(){return this.current+1<this.items.length},s.getTranslation=function(t,e){var n=0,i=0,r=0,o=t.style.transform;if(o){var s=o.split("(")[1].split(")")[0].split(",");n=parseFloat(s[0]),i=parseFloat(s[1]),r=parseFloat(s[2]),n=-1!==s[0].indexOf("%")?n*=.01*e.offsetWidth:n,i=-1!==s[1].indexOf("%")?i*=.01*e.offsetHeight:i}return{x:n,y:i,z:r}},o(r,[{key:"items",get:function(){return this.items_||[]},set:function(t){this.items_!==t&&(this.items_=t)}},{key:"current",get:function(){return this.state.current||0},set:function(t){void 0===t&&(t=0),this.state.current!==t&&(this.state.current=t,this.change.next(t))}},{key:"state",get:function(){return this.state_||(this.state_={current:0}),this.state_}},{key:"wrapperStyle",get:function(){return{transform:"translate3d("+-100*this.state.current+"%, 0, 0)"}}},{key:"innerStyle",get:function(){return{width:100*this.items.length+"%"}}}]),r}(t.Component);Rn.meta={selector:"[slider]",inputs:["items","current","autoplay"],outputs:["change","tween"]};var Hn=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var i=n.prototype;return i.onInit=function(){e.prototype.onInit.call(this);var n=t.getContext(this).node;this.items=Array.prototype.slice.call(n.querySelectorAll(".slider__slide")).map((function(t,e){var n=t.querySelector("img").getAttribute("lazy"),i=t.querySelector(".title");return{node:t,url:n,title:i,id:e+10000001}}))},i.onDragUpEvent=function(t,e){var n=this,i=this.container.getBoundingClientRect(),r=this.wrapper.getBoundingClientRect().left-i.left,o=function(t){return n.items[t].node.offsetLeft},s=this.items.reduce((function(t,e,n){if(-1===t)return n;var i=o(n),s=o(t);return(i=Math.abs(r+i))<(s=Math.abs(r+s))?n:t}),-1);if(this.state.current!==s)this.navTo(s);else{var a=this.items[s].node;this.wrapper.style="transform: translate3d("+-a.offsetLeft+"px, 0px, 0px);"}},o(n,[{key:"wrapperStyle",get:function(){return{transform:"translate3d("+-this.items[this.state.current].node.offsetLeft+"px, 0px, 0px)"}}},{key:"innerStyle",get:function(){if(this.items.length){var t=this.items[this.items.length-1].node;return{width:t.offsetLeft+t.offsetWidth+"px"}}return{width:"auto"}}}]),n}(Rn);Hn.meta={selector:"[slider-products-related]",outputs:["change","tween"]};var Pn=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.onInit=function(){e.prototype.onInit.call(this);var n=t.getContext(this).node;this.items=Array.prototype.slice.call(n.querySelectorAll(".slider__slide")).map((function(t,e){var n=t.querySelector("img"),i=n.getAttribute("title")||n.getAttribute("alt");return{node:t,url:n.getAttribute("lazy"),title:i,id:e+10000001}})),this.title=n.querySelector(".title").innerText,console.log("SliderServiceComponent.onInit",this.items)},o(n,[{key:"current",get:function(){return this.state.current||0},set:function(t){void 0===t&&(t=0),this.state.current!==t&&(this.state.current=t,this.title=this.items[t].title,this.change.next(t))}},{key:"currentLabel",get:function(){return this.current+1}},{key:"totalLabel",get:function(){return this.items.length}}]),n}(Rn);Pn.meta={selector:"[slider-service]",outputs:["change","tween"]};var Un=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e.transform=function(t){return(e=t)?0!==e.indexOf("/"+Ot.NAME)?e:Tt?(console.log(e),e):"/it/it"+(e=(e=e.replace("/"+Ot.NAME,"")).replace(".html","")):e;var e},e}(t.Pipe);Un.meta={name:"slug"};var Nn=function(t){function e(e,n,i,r,o,s,a){var l;return(l=t.call(this,a)||this)[e]=n,l[i]=r,l.index=o,l.count=s,l}return a(e,t),o(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(t.Context),qn=1,zn=2,Bn=3,Wn=4,Yn=function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var o=r.prototype;return o.onInit=function(){var e=t.getContext(this),r=e.module,o=e.node,s=o.firstElementChild,a=o.getAttribute("*virtual");o.removeAttribute("*virtual"),o.removeChild(s);var l=this.tokens=this.getExpressionTokens(a);this.virtualFunction=r.makeFunction(l.iterable),this.container=o,this.template=s,this.mode=this.mode||1,this.width=this.width||250,this.gutter=void 0!==this.gutter?this.gutter:20,this.options={top:0,width:this.width,gutter:this.gutter,containerWidth:0,containerHeight:0,cols:[0],strategy:1},this.cachedRects={},this.cachedInstances=[],this.cacheNodes=[],this.items$=new i.BehaviorSubject([]),this.update$().pipe(n.takeUntil(this.unsubscribe$)).subscribe((function(t){}))},o.onChanges=function(e){var n=t.getContext(this),i=n.module.resolve(this.virtualFunction,n.parentInstance,this)||[];this.mode=this.mode||1,this.width=this.width||250,this.gutter=void 0!==this.gutter?this.gutter:20,this.options.width=this.width,this.updateView(!0),this.items$.next(i)},o.update$=function(){var t=this;return i.merge(this.scroll$(),this.resize$(),this.items$).pipe(n.map((function(e){var n=t.options,i=t.items$.getValue(),r=i.length;t.container.position="relative";for(var o=0,s=t.getWidth(),a=t.getGutter(s),l=i.filter((function(e,i){var l,c,u,h,p,f=t.cachedRects[i];if(f?(l=f.col,c=f.height,h=f.left):(l=t.getCol(),c=t.getHeight(s,e)),u=n.cols[l],t.intersect(u+n.top,u+c+n.top,0,n.containerHeight)){f||(h=t.getLeft(l,s,a));var d=t.cachedNode(i,i,e,r);return d.style.position="absolute",d.style.top=u+"px",d.style.left=h+"px",d.style.width=s+"px",c!==d.offsetHeight&&(c=d.offsetHeight),p=u+c+n.gutter,o=Math.max(o,p),n.cols[l]=p,f?(f.height=c,f.bottom=p):t.cachedRects[i]={col:l,width:s,height:c,left:h,top:u,bottom:p},!0}return t.removeNode(i),p=u+c+n.gutter,n.cols[l]=p,o=Math.max(o,p),!1})),c=i.length;c<t.cacheNodes.length;)t.removeNode(c),c++;return t.cacheNodes.length=i.length,t.container.style.height=o+"px",l})))},o.getCols=function(){var t=this.options,e=Math.floor((t.containerWidth+t.gutter)/(t.width+t.gutter))||1;return new Array(e).fill(0)},o.getCol=function(){var t,e=this.options;switch(this.mode){case zn:case Bn:case qn:t=e.cols.reduce((function(t,e,n,i){return e<i[t]?n:t}),0);break;case Wn:default:t=0}return t},o.getWidth=function(){var t,e=this.options;switch(this.mode){case zn:case Bn:t=e.width;break;case qn:t=(e.containerWidth-(e.cols.length-1)*e.gutter)/e.cols.length;break;case Wn:default:t=e.containerWidth}return t},o.getHeight=function(t,e){var n,i=this.options;switch(this.mode){case zn:case Bn:case qn:n=i.width;break;case Wn:default:n=80}return n},o.getGutter=function(t){var e,n=this.options;switch(this.mode){case zn:case Bn:e=n.gutter;break;case qn:e=(n.containerWidth-n.cols.length*t)/(n.cols.length-1);break;case Wn:default:e=0}return e},o.getLeft=function(t,e,n){var i,r=this.options;switch(this.mode){case zn:case qn:i=t*(e+n);break;case Bn:i=(r.containerWidth-r.cols.length*(e+n)+n)/2+t*(e+n);break;case Wn:default:i=0}return i},o.cachedNode=function(t,e,n,i){return this.cacheNodes[t]?this.updateNode(t,e,n):this.createNode(t,e,n,i)},o.createNode=function(e,n,i,r){var o=this.template.cloneNode(!0);delete o.rxcompId,this.container.appendChild(o),this.cacheNodes[e]=o;var s=t.getContext(this),a=s.module,l=this.tokens,c=[l.key,n,l.value,i,n,r,s.parentInstance],u=a.makeInstance(o,Nn,s.selector,s.parentInstance,c),h=t.getContext(u);return a.compile(o,h.instance),this.cachedInstances[e]=u,o},o.updateNode=function(t,e,n){var i=this.cachedInstances[t],r=this.tokens;return i[r.key]!==e&&(i[r.key]=e,i[r.value]=n,i.pushChanges()),this.cacheNodes[t]},o.removeNode=function(e){this.cachedInstances[e]=void 0;var n=this.cacheNodes[e];if(n){var i=t.getContext(this).module;n.parentNode.removeChild(n),i.remove(n)}return this.cacheNodes[e]=void 0,n},o.intersect=function(t,e,n,i){return n<e&&i>t},o.resize$=function(){var t=this;return i.fromEvent(window,"resize").pipe(n.auditTime(100),n.startWith(null),n.tap((function(){return t.updateView(!0)})))},o.scroll$=function(t){var e=this;return i.fromEvent(window,"scroll").pipe(n.tap((function(){return e.updateView()})))},o.updateView=function(t){var e=this.container.getBoundingClientRect(),n=this.options;n.top=e.top,n.containerWidth=e.width,n.containerHeight=window.innerHeight,n.cols=this.getCols(),t&&(this.cachedRects={})},o.getExpressionTokens=function(t){if(null===t)throw new Error("invalid virtual");if(-1===t.trim().indexOf("let ")||-1===t.trim().indexOf(" of "))throw new Error("invalid virtual");var e=t.split(";").map((function(t){return t.trim()})).filter((function(t){return""!==t})),n=e[0].split(" of ").map((function(t){return t.trim()})),i=n[0].replace(/\s*let\s*/,""),r=n[1],o="index",s=i.match(/\[(.+)\s*,\s*(.+)\]/);if(s&&(o=s[1],i=s[2]),e.length>1){var a=e[1].split(/\s*let\s*|\s*=\s*index/).map((function(t){return t.trim()}));3===a.length&&(o=a[1])}return{key:o,value:i,iterable:r}},r}(t.Structure);Yn.meta={selector:"[*virtual]",inputs:["mode","width","gutter"]};var Vn=function(t){function e(){return t.apply(this,arguments)||this}return a(e,t),e}(t.Module);Vn.meta={imports:[t.CoreModule,e.FormModule],declarations:[w,b,k,E,yt,wt,kt,xt,_,T,pt,dt,mt,St,gt,Ge,It,Je,Ke,rn,nn,on,sn,jt,gn,yn,wn,xn,Sn,Ln,$n,Rn,Hn,Pn,Un,$t,Yn],bootstrap:y},t.Browser.bootstrap(Vn)}));
//# sourceMappingURL=main.min.js.map